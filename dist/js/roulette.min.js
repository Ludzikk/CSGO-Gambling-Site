"use strict";var winningColor,playerBetAmount,rouletteDiv=document.querySelector(".main-roulette__list"),rouletteItems=document.querySelectorAll(".main-roulette__list-item"),elem=document.querySelector(".main-roulette__arrow"),elemOffset=elem.getBoundingClientRect(),middleLeft=elemOffset.left+2,middleRight=elemOffset.right-2,lastDrops=document.querySelector(".main-roulette__lastdrops"),seconds=document.querySelector(".main-roulette__countdown-timer-seconds"),secondTime=10,betInput=document.querySelector("#bet"),redButton=document.querySelector(".main-roulette__betbox-bet--red"),greenButton=document.querySelector(".main-roulette__betbox-bet--green"),blackButton=document.querySelector(".main-roulette__betbox-bet--black"),playerBet=0,spinning=!1,balanceAmount=document.querySelector(".nav__list-item-balance-amount"),spinRoulette=function(){var e=Math.floor(25e3*Math.random()+5e3);spinning=!0,rouletteDiv.classList.add("spin"),rouletteDiv.style.transform="translate3d(-".concat(e,"px, 0, 0)")},betAmountRed=(setInterval(function(){secondTime--,seconds.textContent=secondTime+":"},1e3),setInterval(function(){0===secondTime&&(secondTime=10,seconds.textContent=secondTime+":")},100),setInterval(function(){spinRoulette(),setTimeout(function(){var o=lastDrops.childElementCount;spinning=!1,rouletteItems.forEach(function(e){var t,n=e.getBoundingClientRect();middleLeft>=n.left&&middleRight<=n.right&&e.classList.contains("main-roulette__list-item--red")?(winningColor="red",(t=document.createElement("div")).setAttribute("class","main-roulette__lastdrops-item main-roulette__lastdrops-item--red"),6===o&&lastDrops.firstElementChild.remove(),lastDrops.append(t),"red"===playerBet&&(playerBetAmount*=2,console.log(playerBetAmount),t=parseFloat(balanceAmount.textContent)+playerBetAmount,balanceAmount.textContent=t.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))):middleLeft>=n.left&&middleRight<=n.right&&e.classList.contains("main-roulette__list-item--black")?(winningColor="black",(t=document.createElement("div")).setAttribute("class","main-roulette__lastdrops-item main-roulette__lastdrops-item--black"),6===o&&lastDrops.firstElementChild.remove(),lastDrops.append(t),"black"===playerBet&&(playerBetAmount*=2,console.log(playerBetAmount),t=parseFloat(balanceAmount.textContent)+playerBetAmount,balanceAmount.textContent=t.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))):middleLeft>=n.left&&middleRight<=n.right&&e.classList.contains("main-roulette__list-item--green")&&(winningColor="green",(t=document.createElement("div")).setAttribute("class","main-roulette__lastdrops-item main-roulette__lastdrops-item--green"),6===o&&lastDrops.firstElementChild.remove(),lastDrops.append(t),"green"===playerBet)&&(playerBetAmount*=14,console.log(playerBetAmount),n=parseFloat(balanceAmount.textContent)+playerBetAmount,balanceAmount.textContent=n.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))}),playerBet=0},6e3),setTimeout(function(){rouletteDiv.classList.remove("spin"),rouletteDiv.style.transform="translate3d(0, 0, 0)"},9900)},1e4),function(){var e=localStorage.getItem("Balance");0!==betInput.value&&betInput.value<=parseFloat(e)&&0===playerBet&&!1===spinning&&(e=parseFloat(balanceAmount.textContent)-betInput.value,playerBet="red",playerBetAmount=betInput.value,balanceAmount.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))}),betAmountBlack=function(){var e=localStorage.getItem("Balance");0!==betInput.value&&betInput.value<=parseFloat(e)&&0===playerBet&&!1===spinning&&(e=parseFloat(balanceAmount.textContent)-betInput.value,playerBet="black",playerBetAmount=betInput.value,balanceAmount.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))},betAmountGreen=function(){var e=localStorage.getItem("Balance");0!==betInput.value&&betInput.value<=parseFloat(e)&&0===playerBet&&!1===spinning&&(e=parseFloat(balanceAmount.textContent)-betInput.value,playerBet="green",playerBetAmount=betInput.value,balanceAmount.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))};redButton.addEventListener("click",betAmountRed),greenButton.addEventListener("click",betAmountGreen),blackButton.addEventListener("click",betAmountBlack);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdWxldHRlLmpzIl0sIm5hbWVzIjpbInJvdWxldHRlRGl2IiwicGxheWVyQmV0QW1vdW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicm91bGV0dGVJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ3aW5uaW5nQ29sb3IiLCJlbGVtIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZWxlbU9mZnNldCIsIm1pZGRsZUxlZnQiLCJtaWRkbGVSaWdodCIsInNlY29uZFRpbWUiLCJiZXRJbnB1dCIsInJlZEJ1dHRvbiIsImdyZWVuQnV0dG9uIiwiYmxhY2tCdXR0b24iLCJwbGF5ZXJCZXQiLCJzcGlubmluZyIsImJhbGFuY2VBbW91bnQiLCJyYW5kb21OdW0iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRJbnRlcnZhbCIsInN0eWxlIiwidHJhbnNmb3JtIiwiY29uY2F0IiwiYmV0QW1vdW50UmVkIiwic2Vjb25kcyIsInNwaW5Sb3VsZXR0ZSIsInNldFRpbWVvdXQiLCJsYXN0RHJvcHNDaGlsZENvdW50IiwiY3JlYXRlRWxlbWVudCIsImxhc3REcm9wSXRlbSIsImxhc3REcm9wcyIsImZpcnN0RWxlbWVudENoaWxkIiwicG9zIiwibGVmdCIsInJpZ2h0IiwiaXRlbSIsImFtb3VudFZhbHVlIiwidGV4dENvbnRlbnQiLCJ0b0ZpeGVkIiwibG9jYWxTdG9yYWdlIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlIiwiYXBwZW5kIiwiY29uc29sZSIsInZhbHVlIiwicGFyc2VGbG9hdCIsInNldEl0ZW0iLCJsb2ciLCJjb250YWlucyIsImJldEFtb3VudEJsYWNrIiwiYmV0QW1vdW50R3JlZW4iLCJnZXRJdGVtIiwiYmFsYW5jZSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJhQUFBLElBQU1BLGFBaUJGQyxnQkFqQkVELFlBQWNFLFNBQVNDLGNBQWMsc0JBQXNCLEVBQzNEQyxjQUFnQkYsU0FBU0csaUJBQWlC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M0JoQyxjQUFjeUIsWUFBY08sRUFBTU4sUUFBUSxDQUFDLEVBRTNDQyxhQUFhTyxRQUFRLFVBQVMsR0FBQXhCLE9BQUtWLGNBQWN5QixXQUFXLENBQUUsRUFFaEUsRUFDTWEsZUFBaUIsV0FDdEIsSUFBTUUsRUFBVWIsYUFBYVksUUFBUSxTQUFTLEVBRzFCLElBQW5CN0MsU0FBU3NDLE9BQ1R0QyxTQUFTc0MsT0FBU0MsV0FBV08sQ0FBTyxHQUN0QixJQUFkMUMsV0FDYSxDQUFBLElBQWJDLFdBR0lpQyxFQURjQyxXQUFXakMsY0FBY3lCLFdBQVcsRUFDNUIvQixTQUFTc0MsTUFDbkNsQyxVQUFZLFFBQ1poQixnQkFBa0JZLFNBQVNzQyxNQUUzQmhDLGNBQWN5QixZQUFjTyxFQUFNTixRQUFRLENBQUMsRUFFM0NDLGFBQWFPLFFBQVEsVUFBUyxHQUFBeEIsT0FBS1YsY0FBY3lCLFdBQVcsQ0FBRSxFQUVoRSxFQUVBOUIsVUFBVThDLGlCQUFpQixRQUFTOUIsWUFBWSxFQUNoRGYsWUFBWTZDLGlCQUFpQixRQUFTSCxjQUFjLEVBQ3BEekMsWUFBWTRDLGlCQUFpQixRQUFTSixjQUFjIiwiZmlsZSI6InJvdWxldHRlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJvdWxldHRlRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLXJvdWxldHRlX19saXN0XCIpO1xyXG5jb25zdCByb3VsZXR0ZUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tYWluLXJvdWxldHRlX19saXN0LWl0ZW1cIik7XHJcbmxldCB3aW5uaW5nQ29sb3I7XHJcbmxldCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLXJvdWxldHRlX19hcnJvd1wiKTtcclxubGV0IGVsZW1PZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5sZXQgbWlkZGxlTGVmdCA9IGVsZW1PZmZzZXQubGVmdCArIDI7XHJcbmxldCBtaWRkbGVSaWdodCA9IGVsZW1PZmZzZXQucmlnaHQgLSAyO1xyXG5jb25zdCBsYXN0RHJvcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tcm91bGV0dGVfX2xhc3Rkcm9wc1wiKTtcclxuY29uc3Qgc2Vjb25kcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIubWFpbi1yb3VsZXR0ZV9fY291bnRkb3duLXRpbWVyLXNlY29uZHNcIlxyXG4pO1xyXG5sZXQgc2Vjb25kVGltZSA9IDEwO1xyXG5jb25zdCBiZXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYmV0XCIpO1xyXG5jb25zdCByZWRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tcm91bGV0dGVfX2JldGJveC1iZXQtLXJlZFwiKTtcclxuY29uc3QgZ3JlZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tcm91bGV0dGVfX2JldGJveC1iZXQtLWdyZWVuXCIpO1xyXG5jb25zdCBibGFja0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1yb3VsZXR0ZV9fYmV0Ym94LWJldC0tYmxhY2tcIik7XHJcbmxldCBwbGF5ZXJCZXQgPSAwO1xyXG5sZXQgcGxheWVyQmV0QW1vdW50O1xyXG5sZXQgc3Bpbm5pbmcgPSBmYWxzZTtcclxuY29uc3QgYmFsYW5jZUFtb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19saXN0LWl0ZW0tYmFsYW5jZS1hbW91bnRcIik7XHJcblxyXG5jb25zdCBzcGluUm91bGV0dGUgPSAoKSA9PiB7XHJcblx0Y29uc3QgcmFuZG9tTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjUwMDAgKyA1MDAwKTtcclxuXHRzcGlubmluZyA9IHRydWU7XHJcblxyXG5cdHJvdWxldHRlRGl2LmNsYXNzTGlzdC5hZGQoXCJzcGluXCIpO1xyXG5cdHJvdWxldHRlRGl2LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgtJHtyYW5kb21OdW19cHgsIDAsIDApYDtcclxufTtcclxuXHJcbnNldEludGVydmFsKCgpID0+IHtcclxuXHRzZWNvbmRUaW1lLS07XHJcblx0c2Vjb25kcy50ZXh0Q29udGVudCA9IHNlY29uZFRpbWUgKyBcIjpcIjtcclxufSwgMTAwMCk7XHJcblxyXG5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0aWYgKHNlY29uZFRpbWUgPT09IDApIHtcclxuXHRcdHNlY29uZFRpbWUgPSAxMDtcclxuXHRcdHNlY29uZHMudGV4dENvbnRlbnQgPSBzZWNvbmRUaW1lICsgXCI6XCI7XHJcblx0fVxyXG59LCAxMDApO1xyXG5cclxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdHNwaW5Sb3VsZXR0ZSgpO1xyXG5cclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdGNvbnN0IGxhc3REcm9wc0NoaWxkQ291bnQgPSBsYXN0RHJvcHMuY2hpbGRFbGVtZW50Q291bnQ7XHJcblx0XHRzcGlubmluZyA9IGZhbHNlO1xyXG5cclxuXHRcdHJvdWxldHRlSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0XHRsZXQgcG9zID0gaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHRtaWRkbGVMZWZ0ID49IHBvcy5sZWZ0ICYmXHJcblx0XHRcdFx0bWlkZGxlUmlnaHQgPD0gcG9zLnJpZ2h0ICYmXHJcblx0XHRcdFx0aXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJtYWluLXJvdWxldHRlX19saXN0LWl0ZW0tLXJlZFwiKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHR3aW5uaW5nQ29sb3IgPSBcInJlZFwiO1xyXG5cclxuXHRcdFx0XHRjb25zdCBsYXN0RHJvcEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRcdGxhc3REcm9wSXRlbS5zZXRBdHRyaWJ1dGUoXHJcblx0XHRcdFx0XHRcImNsYXNzXCIsXHJcblx0XHRcdFx0XHRcIm1haW4tcm91bGV0dGVfX2xhc3Rkcm9wcy1pdGVtIG1haW4tcm91bGV0dGVfX2xhc3Rkcm9wcy1pdGVtLS1yZWRcIlxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmIChsYXN0RHJvcHNDaGlsZENvdW50ID09PSA2KSB7XHJcblx0XHRcdFx0XHRsYXN0RHJvcHMuZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRsYXN0RHJvcHMuYXBwZW5kKGxhc3REcm9wSXRlbSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGxhc3REcm9wcy5hcHBlbmQobGFzdERyb3BJdGVtKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChwbGF5ZXJCZXQgPT09IFwicmVkXCIpIHtcclxuXHRcdFx0XHRcdHBsYXllckJldEFtb3VudCA9IHBsYXllckJldEFtb3VudCAqIDI7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhwbGF5ZXJCZXRBbW91bnQpO1xyXG5cdFx0XHRcdFx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRcdFx0XHRcdGxldCB2YWx1ZSA9IGFtb3VudFZhbHVlICsgcGxheWVyQmV0QW1vdW50O1xyXG5cclxuXHRcdFx0XHRcdGJhbGFuY2VBbW91bnQudGV4dENvbnRlbnQgPSB2YWx1ZS50b0ZpeGVkKDIpO1xyXG5cdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJCYWxhbmNlXCIsIGAke2JhbGFuY2VBbW91bnQudGV4dENvbnRlbnR9YCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKFxyXG5cdFx0XHRcdG1pZGRsZUxlZnQgPj0gcG9zLmxlZnQgJiZcclxuXHRcdFx0XHRtaWRkbGVSaWdodCA8PSBwb3MucmlnaHQgJiZcclxuXHRcdFx0XHRpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcIm1haW4tcm91bGV0dGVfX2xpc3QtaXRlbS0tYmxhY2tcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0d2lubmluZ0NvbG9yID0gXCJibGFja1wiO1xyXG5cclxuXHRcdFx0XHRjb25zdCBsYXN0RHJvcEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRcdGxhc3REcm9wSXRlbS5zZXRBdHRyaWJ1dGUoXHJcblx0XHRcdFx0XHRcImNsYXNzXCIsXHJcblx0XHRcdFx0XHRcIm1haW4tcm91bGV0dGVfX2xhc3Rkcm9wcy1pdGVtIG1haW4tcm91bGV0dGVfX2xhc3Rkcm9wcy1pdGVtLS1ibGFja1wiXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKGxhc3REcm9wc0NoaWxkQ291bnQgPT09IDYpIHtcclxuXHRcdFx0XHRcdGxhc3REcm9wcy5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdGxhc3REcm9wcy5hcHBlbmQobGFzdERyb3BJdGVtKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bGFzdERyb3BzLmFwcGVuZChsYXN0RHJvcEl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAocGxheWVyQmV0ID09PSBcImJsYWNrXCIpIHtcclxuXHRcdFx0XHRcdHBsYXllckJldEFtb3VudCA9IHBsYXllckJldEFtb3VudCAqIDI7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhwbGF5ZXJCZXRBbW91bnQpO1xyXG5cdFx0XHRcdFx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRcdFx0XHRcdGxldCB2YWx1ZSA9IGFtb3VudFZhbHVlICsgcGxheWVyQmV0QW1vdW50O1xyXG5cclxuXHRcdFx0XHRcdGJhbGFuY2VBbW91bnQudGV4dENvbnRlbnQgPSB2YWx1ZS50b0ZpeGVkKDIpO1xyXG5cdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJCYWxhbmNlXCIsIGAke2JhbGFuY2VBbW91bnQudGV4dENvbnRlbnR9YCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKFxyXG5cdFx0XHRcdG1pZGRsZUxlZnQgPj0gcG9zLmxlZnQgJiZcclxuXHRcdFx0XHRtaWRkbGVSaWdodCA8PSBwb3MucmlnaHQgJiZcclxuXHRcdFx0XHRpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcIm1haW4tcm91bGV0dGVfX2xpc3QtaXRlbS0tZ3JlZW5cIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0d2lubmluZ0NvbG9yID0gXCJncmVlblwiO1xyXG5cclxuXHRcdFx0XHRjb25zdCBsYXN0RHJvcEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRcdGxhc3REcm9wSXRlbS5zZXRBdHRyaWJ1dGUoXHJcblx0XHRcdFx0XHRcImNsYXNzXCIsXHJcblx0XHRcdFx0XHRcIm1haW4tcm91bGV0dGVfX2xhc3Rkcm9wcy1pdGVtIG1haW4tcm91bGV0dGVfX2xhc3Rkcm9wcy1pdGVtLS1ncmVlblwiXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKGxhc3REcm9wc0NoaWxkQ291bnQgPT09IDYpIHtcclxuXHRcdFx0XHRcdGxhc3REcm9wcy5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdGxhc3REcm9wcy5hcHBlbmQobGFzdERyb3BJdGVtKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bGFzdERyb3BzLmFwcGVuZChsYXN0RHJvcEl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAocGxheWVyQmV0ID09PSBcImdyZWVuXCIpIHtcclxuXHRcdFx0XHRcdHBsYXllckJldEFtb3VudCA9IHBsYXllckJldEFtb3VudCAqIDE0O1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cocGxheWVyQmV0QW1vdW50KTtcclxuXHRcdFx0XHRcdGxldCBhbW91bnRWYWx1ZSA9IHBhcnNlRmxvYXQoYmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCk7XHJcblx0XHRcdFx0XHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSArIHBsYXllckJldEFtb3VudDtcclxuXHJcblx0XHRcdFx0XHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiQmFsYW5jZVwiLCBgJHtiYWxhbmNlQW1vdW50LnRleHRDb250ZW50fWApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cGxheWVyQmV0ID0gMDtcclxuXHR9LCA2MDAwKTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRyb3VsZXR0ZURpdi5jbGFzc0xpc3QucmVtb3ZlKFwic3BpblwiKTtcclxuXHRcdHJvdWxldHRlRGl2LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLCAwLCAwKWA7XHJcblx0fSwgOTkwMCk7XHJcbn0sIDEwMDAwKTtcclxuXHJcbmNvbnN0IGJldEFtb3VudFJlZCA9ICgpID0+IHtcclxuXHRjb25zdCBiYWxhbmNlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpO1xyXG5cclxuXHRpZiAoXHJcblx0XHRiZXRJbnB1dC52YWx1ZSAhPT0gMCAmJlxyXG5cdFx0YmV0SW5wdXQudmFsdWUgPD0gcGFyc2VGbG9hdChiYWxhbmNlKSAmJlxyXG5cdFx0cGxheWVyQmV0ID09PSAwICYmXHJcblx0XHRzcGlubmluZyA9PT0gZmFsc2VcclxuXHQpIHtcclxuXHRcdGxldCBhbW91bnRWYWx1ZSA9IHBhcnNlRmxvYXQoYmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCk7XHJcblx0XHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSAtIGJldElucHV0LnZhbHVlO1xyXG5cdFx0cGxheWVyQmV0ID0gXCJyZWRcIjtcclxuXHRcdHBsYXllckJldEFtb3VudCA9IGJldElucHV0LnZhbHVlO1xyXG5cclxuXHRcdGJhbGFuY2VBbW91bnQudGV4dENvbnRlbnQgPSB2YWx1ZS50b0ZpeGVkKDIpO1xyXG5cclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiQmFsYW5jZVwiLCBgJHtiYWxhbmNlQW1vdW50LnRleHRDb250ZW50fWApO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGJldEFtb3VudEJsYWNrID0gKCkgPT4ge1xyXG5cdGNvbnN0IGJhbGFuY2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkJhbGFuY2VcIik7XHJcblxyXG5cdGlmIChcclxuXHRcdGJldElucHV0LnZhbHVlICE9PSAwICYmXHJcblx0XHRiZXRJbnB1dC52YWx1ZSA8PSBwYXJzZUZsb2F0KGJhbGFuY2UpICYmXHJcblx0XHRwbGF5ZXJCZXQgPT09IDAgJiZcclxuXHRcdHNwaW5uaW5nID09PSBmYWxzZVxyXG5cdCkge1xyXG5cdFx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRcdGxldCB2YWx1ZSA9IGFtb3VudFZhbHVlIC0gYmV0SW5wdXQudmFsdWU7XHJcblx0XHRwbGF5ZXJCZXQgPSBcImJsYWNrXCI7XHJcblx0XHRwbGF5ZXJCZXRBbW91bnQgPSBiZXRJbnB1dC52YWx1ZTtcclxuXHJcblx0XHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxuXHR9XHJcbn07XHJcbmNvbnN0IGJldEFtb3VudEdyZWVuID0gKCkgPT4ge1xyXG5cdGNvbnN0IGJhbGFuY2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkJhbGFuY2VcIik7XHJcblxyXG5cdGlmIChcclxuXHRcdGJldElucHV0LnZhbHVlICE9PSAwICYmXHJcblx0XHRiZXRJbnB1dC52YWx1ZSA8PSBwYXJzZUZsb2F0KGJhbGFuY2UpICYmXHJcblx0XHRwbGF5ZXJCZXQgPT09IDAgJiZcclxuXHRcdHNwaW5uaW5nID09PSBmYWxzZVxyXG5cdCkge1xyXG5cdFx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRcdGxldCB2YWx1ZSA9IGFtb3VudFZhbHVlIC0gYmV0SW5wdXQudmFsdWU7XHJcblx0XHRwbGF5ZXJCZXQgPSBcImdyZWVuXCI7XHJcblx0XHRwbGF5ZXJCZXRBbW91bnQgPSBiZXRJbnB1dC52YWx1ZTtcclxuXHJcblx0XHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxuXHR9XHJcbn07XHJcblxyXG5yZWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJldEFtb3VudFJlZCk7XHJcbmdyZWVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBiZXRBbW91bnRHcmVlbik7XHJcbmJsYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBiZXRBbW91bnRCbGFjayk7XHJcbiJdfQ==
