"use strict";var winningColor,playerBetAmount,rouletteDiv=document.querySelector(".main-roulette__list"),rouletteItems=document.querySelectorAll(".main-roulette__list-item"),elem=document.querySelector(".main-roulette__arrow"),elemOffset=elem.getBoundingClientRect(),middleLeft=elemOffset.left+2,middleRight=elemOffset.right-2,lastDrops=document.querySelector(".main-roulette__lastdrops"),seconds=document.querySelector(".main-roulette__countdown-timer-seconds"),secondTime=10,betInput=document.querySelector("#bet"),redButton=document.querySelector(".main-roulette__betbox-bet--red"),greenButton=document.querySelector(".main-roulette__betbox-bet--green"),blackButton=document.querySelector(".main-roulette__betbox-bet--black"),playerBet=0,spinning=!1,balanceAmount=document.querySelector(".nav__list-item-balance-amount"),spinRoulette=function(){var e=Math.floor(25e3*Math.random()+5e3);spinning=!0,rouletteDiv.classList.add("spin"),rouletteDiv.style.transform="translate3d(-".concat(e,"px, 0, 0)")},betAmountRed=(setInterval(function(){secondTime--,seconds.textContent=secondTime+":"},1e3),setInterval(function(){0===secondTime&&(secondTime=10,seconds.textContent=secondTime+":")},100),setInterval(function(){spinRoulette(),setTimeout(function(){var o=lastDrops.childElementCount;spinning=!1,rouletteItems.forEach(function(e){var t,n=e.getBoundingClientRect();middleLeft>=n.left&&middleRight<=n.right&&e.classList.contains("main-roulette__list-item--red")?(winningColor="red",(t=document.createElement("div")).setAttribute("class","main-roulette__lastdrops-item main-roulette__lastdrops-item--red"),6===o&&lastDrops.firstElementChild.remove(),lastDrops.append(t),"red"===playerBet&&(playerBetAmount*=2,console.log(playerBetAmount),t=parseFloat(balanceAmount.textContent)+playerBetAmount,balanceAmount.textContent=t.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))):middleLeft>=n.left&&middleRight<=n.right&&e.classList.contains("main-roulette__list-item--black")?(winningColor="black",(t=document.createElement("div")).setAttribute("class","main-roulette__lastdrops-item main-roulette__lastdrops-item--black"),6===o&&lastDrops.firstElementChild.remove(),lastDrops.append(t),"black"===playerBet&&(playerBetAmount*=2,console.log(playerBetAmount),t=parseFloat(balanceAmount.textContent)+playerBetAmount,balanceAmount.textContent=t.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))):middleLeft>=n.left&&middleRight<=n.right&&e.classList.contains("main-roulette__list-item--green")&&(winningColor="green",(t=document.createElement("div")).setAttribute("class","main-roulette__lastdrops-item main-roulette__lastdrops-item--green"),6===o&&lastDrops.firstElementChild.remove(),lastDrops.append(t),"green"===playerBet)&&(playerBetAmount*=14,console.log(playerBetAmount),n=parseFloat(balanceAmount.textContent)+playerBetAmount,balanceAmount.textContent=n.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))}),playerBet=0},6e3),setTimeout(function(){rouletteDiv.classList.remove("spin"),rouletteDiv.style.transform="translate3d(0, 0, 0)"},9900)},1e4),function(){var e=localStorage.getItem("Balance");0!==betInput.value&&betInput.value<=e&&0===playerBet&&!1===spinning&&(e=parseFloat(balanceAmount.textContent)-betInput.value,playerBet="red",playerBetAmount=betInput.value,balanceAmount.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))}),betAmountBlack=function(){var e=localStorage.getItem("Balance");0!==betInput.value&&betInput.value<=e&&0===playerBet&&!1===spinning&&(e=parseFloat(balanceAmount.textContent)-betInput.value,playerBet="black",playerBetAmount=betInput.value,balanceAmount.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))},betAmountGreen=function(){var e=localStorage.getItem("Balance");0!==betInput.value&&betInput.value<=e&&0===playerBet&&!1===spinning&&(e=parseFloat(balanceAmount.textContent)-betInput.value,playerBet="green",playerBetAmount=betInput.value,balanceAmount.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)))};redButton.addEventListener("click",betAmountRed),greenButton.addEventListener("click",betAmountGreen),blackButton.addEventListener("click",betAmountBlack);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdWxldHRlLmpzIl0sIm5hbWVzIjpbInJvdWxldHRlRGl2IiwicGxheWVyQmV0QW1vdW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicm91bGV0dGVJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ3aW5uaW5nQ29sb3IiLCJlbGVtIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZWxlbU9mZnNldCIsIm1pZGRsZUxlZnQiLCJtaWRkbGVSaWdodCIsInNlY29uZFRpbWUiLCJiZXRJbnB1dCIsInJlZEJ1dHRvbiIsImdyZWVuQnV0dG9uIiwiYmxhY2tCdXR0b24iLCJwbGF5ZXJCZXQiLCJzcGlubmluZyIsImJhbGFuY2VBbW91bnQiLCJyYW5kb21OdW0iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRJbnRlcnZhbCIsInN0eWxlIiwidHJhbnNmb3JtIiwiY29uY2F0IiwiYmV0QW1vdW50UmVkIiwic2Vjb25kcyIsInNwaW5Sb3VsZXR0ZSIsInNldFRpbWVvdXQiLCJsYXN0RHJvcHNDaGlsZENvdW50IiwiY3JlYXRlRWxlbWVudCIsImxhc3REcm9wSXRlbSIsImxhc3REcm9wcyIsImZpcnN0RWxlbWVudENoaWxkIiwicG9zIiwibGVmdCIsInJpZ2h0IiwiaXRlbSIsImFtb3VudFZhbHVlIiwidGV4dENvbnRlbnQiLCJ0b0ZpeGVkIiwibG9jYWxTdG9yYWdlIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlIiwiYXBwZW5kIiwiY29uc29sZSIsInZhbHVlIiwicGFyc2VGbG9hdCIsInNldEl0ZW0iLCJsb2ciLCJjb250YWlucyIsImJldEFtb3VudEJsYWNrIiwiYmV0QW1vdW50R3JlZW4iLCJnZXRJdGVtIiwiYmFsYW5jZSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJhQUFBLElBQU1BLGFBaUJGQyxnQkFqQkVELFlBQWNFLFNBQVNDLGNBQWMsc0JBQXNCLEVBQzNEQyxjQUFnQkYsU0FBU0csaUJBQWlC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QU1OLFFBQVEsQ0FBQyxFQUUzQ0MsYUFBYU8sUUFBUSxVQUFTLEdBQUF4QixPQUFLVixjQUFjeUIsV0FBVyxDQUFFLEVBRWhFLEVBRU1hLGVBQWlCLFdBQ3RCLElBQU1FLEVBQVViLGFBQWFZLFFBQVEsU0FBUyxFQUcxQixJQUFuQjdDLFNBQVNzQyxPQUNUdEMsU0FBU3NDLE9BQVNRLEdBQ0osSUFBZDFDLFdBQ2EsQ0FBQSxJQUFiQyxXQUdJaUMsRUFEY0MsV0FBV2pDLGNBQWN5QixXQUFXLEVBQzVCL0IsU0FBU3NDLE1BQ25DbEMsVUFBWSxRQUNaaEIsZ0JBQWtCWSxTQUFTc0MsTUFFM0JoQyxjQUFjeUIsWUFBY08sRUFBTU4sUUFBUSxDQUFDLEVBRTNDQyxhQUFhTyxRQUFRLFVBQVMsR0FBQXhCLE9BQUtWLGNBQWN5QixXQUFXLENBQUUsRUFFaEUsRUFFQTlCLFVBQVU4QyxpQkFBaUIsUUFBUzlCLFlBQVksRUFDaERmLFlBQVk2QyxpQkFBaUIsUUFBU0gsY0FBYyxFQUNwRHpDLFlBQVk0QyxpQkFBaUIsUUFBU0osY0FBYyIsImZpbGUiOiJyb3VsZXR0ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByb3VsZXR0ZURpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1yb3VsZXR0ZV9fbGlzdFwiKTtcclxuY29uc3Qgcm91bGV0dGVJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWFpbi1yb3VsZXR0ZV9fbGlzdC1pdGVtXCIpO1xyXG5sZXQgd2lubmluZ0NvbG9yO1xyXG5sZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1yb3VsZXR0ZV9fYXJyb3dcIik7XHJcbmxldCBlbGVtT2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxubGV0IG1pZGRsZUxlZnQgPSBlbGVtT2Zmc2V0LmxlZnQgKyAyO1xyXG5sZXQgbWlkZGxlUmlnaHQgPSBlbGVtT2Zmc2V0LnJpZ2h0IC0gMjtcclxuY29uc3QgbGFzdERyb3BzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLXJvdWxldHRlX19sYXN0ZHJvcHNcIik7XHJcbmNvbnN0IHNlY29uZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLm1haW4tcm91bGV0dGVfX2NvdW50ZG93bi10aW1lci1zZWNvbmRzXCJcclxuKTtcclxubGV0IHNlY29uZFRpbWUgPSAxMDtcclxuY29uc3QgYmV0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JldFwiKTtcclxuY29uc3QgcmVkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLXJvdWxldHRlX19iZXRib3gtYmV0LS1yZWRcIik7XHJcbmNvbnN0IGdyZWVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLXJvdWxldHRlX19iZXRib3gtYmV0LS1ncmVlblwiKTtcclxuY29uc3QgYmxhY2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tcm91bGV0dGVfX2JldGJveC1iZXQtLWJsYWNrXCIpO1xyXG5sZXQgcGxheWVyQmV0ID0gMDtcclxubGV0IHBsYXllckJldEFtb3VudDtcclxubGV0IHNwaW5uaW5nID0gZmFsc2U7XHJcbmNvbnN0IGJhbGFuY2VBbW91bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbGlzdC1pdGVtLWJhbGFuY2UtYW1vdW50XCIpO1xyXG5cclxuY29uc3Qgc3BpblJvdWxldHRlID0gKCkgPT4ge1xyXG5cdGNvbnN0IHJhbmRvbU51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1MDAwICsgNTAwMCk7XHJcblx0c3Bpbm5pbmcgPSB0cnVlO1xyXG5cclxuXHRyb3VsZXR0ZURpdi5jbGFzc0xpc3QuYWRkKFwic3BpblwiKTtcclxuXHRyb3VsZXR0ZURpdi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoLSR7cmFuZG9tTnVtfXB4LCAwLCAwKWA7XHJcbn07XHJcblxyXG5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0c2Vjb25kVGltZS0tO1xyXG5cdHNlY29uZHMudGV4dENvbnRlbnQgPSBzZWNvbmRUaW1lICsgXCI6XCI7XHJcbn0sIDEwMDApO1xyXG5cclxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdGlmIChzZWNvbmRUaW1lID09PSAwKSB7XHJcblx0XHRzZWNvbmRUaW1lID0gMTA7XHJcblx0XHRzZWNvbmRzLnRleHRDb250ZW50ID0gc2Vjb25kVGltZSArIFwiOlwiO1xyXG5cdH1cclxufSwgMTAwKTtcclxuXHJcbnNldEludGVydmFsKCgpID0+IHtcclxuXHRzcGluUm91bGV0dGUoKTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRjb25zdCBsYXN0RHJvcHNDaGlsZENvdW50ID0gbGFzdERyb3BzLmNoaWxkRWxlbWVudENvdW50O1xyXG5cdFx0c3Bpbm5pbmcgPSBmYWxzZTtcclxuXHJcblx0XHRyb3VsZXR0ZUl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdFx0bGV0IHBvcyA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0bWlkZGxlTGVmdCA+PSBwb3MubGVmdCAmJlxyXG5cdFx0XHRcdG1pZGRsZVJpZ2h0IDw9IHBvcy5yaWdodCAmJlxyXG5cdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwibWFpbi1yb3VsZXR0ZV9fbGlzdC1pdGVtLS1yZWRcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0d2lubmluZ0NvbG9yID0gXCJyZWRcIjtcclxuXHJcblx0XHRcdFx0Y29uc3QgbGFzdERyb3BJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0XHRsYXN0RHJvcEl0ZW0uc2V0QXR0cmlidXRlKFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiLFxyXG5cdFx0XHRcdFx0XCJtYWluLXJvdWxldHRlX19sYXN0ZHJvcHMtaXRlbSBtYWluLXJvdWxldHRlX19sYXN0ZHJvcHMtaXRlbS0tcmVkXCJcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRpZiAobGFzdERyb3BzQ2hpbGRDb3VudCA9PT0gNikge1xyXG5cdFx0XHRcdFx0bGFzdERyb3BzLmZpcnN0RWxlbWVudENoaWxkLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0bGFzdERyb3BzLmFwcGVuZChsYXN0RHJvcEl0ZW0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRsYXN0RHJvcHMuYXBwZW5kKGxhc3REcm9wSXRlbSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAocGxheWVyQmV0ID09PSBcInJlZFwiKSB7XHJcblx0XHRcdFx0XHRwbGF5ZXJCZXRBbW91bnQgPSBwbGF5ZXJCZXRBbW91bnQgKiAyO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cocGxheWVyQmV0QW1vdW50KTtcclxuXHRcdFx0XHRcdGxldCBhbW91bnRWYWx1ZSA9IHBhcnNlRmxvYXQoYmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCk7XHJcblx0XHRcdFx0XHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSArIHBsYXllckJldEFtb3VudDtcclxuXHJcblx0XHRcdFx0XHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiQmFsYW5jZVwiLCBgJHtiYWxhbmNlQW1vdW50LnRleHRDb250ZW50fWApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHRtaWRkbGVMZWZ0ID49IHBvcy5sZWZ0ICYmXHJcblx0XHRcdFx0bWlkZGxlUmlnaHQgPD0gcG9zLnJpZ2h0ICYmXHJcblx0XHRcdFx0aXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJtYWluLXJvdWxldHRlX19saXN0LWl0ZW0tLWJsYWNrXCIpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHdpbm5pbmdDb2xvciA9IFwiYmxhY2tcIjtcclxuXHJcblx0XHRcdFx0Y29uc3QgbGFzdERyb3BJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0XHRsYXN0RHJvcEl0ZW0uc2V0QXR0cmlidXRlKFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiLFxyXG5cdFx0XHRcdFx0XCJtYWluLXJvdWxldHRlX19sYXN0ZHJvcHMtaXRlbSBtYWluLXJvdWxldHRlX19sYXN0ZHJvcHMtaXRlbS0tYmxhY2tcIlxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmIChsYXN0RHJvcHNDaGlsZENvdW50ID09PSA2KSB7XHJcblx0XHRcdFx0XHRsYXN0RHJvcHMuZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRsYXN0RHJvcHMuYXBwZW5kKGxhc3REcm9wSXRlbSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGxhc3REcm9wcy5hcHBlbmQobGFzdERyb3BJdGVtKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKHBsYXllckJldCA9PT0gXCJibGFja1wiKSB7XHJcblx0XHRcdFx0XHRwbGF5ZXJCZXRBbW91bnQgPSBwbGF5ZXJCZXRBbW91bnQgKiAyO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cocGxheWVyQmV0QW1vdW50KTtcclxuXHRcdFx0XHRcdGxldCBhbW91bnRWYWx1ZSA9IHBhcnNlRmxvYXQoYmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCk7XHJcblx0XHRcdFx0XHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSArIHBsYXllckJldEFtb3VudDtcclxuXHJcblx0XHRcdFx0XHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiQmFsYW5jZVwiLCBgJHtiYWxhbmNlQW1vdW50LnRleHRDb250ZW50fWApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHRtaWRkbGVMZWZ0ID49IHBvcy5sZWZ0ICYmXHJcblx0XHRcdFx0bWlkZGxlUmlnaHQgPD0gcG9zLnJpZ2h0ICYmXHJcblx0XHRcdFx0aXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJtYWluLXJvdWxldHRlX19saXN0LWl0ZW0tLWdyZWVuXCIpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHdpbm5pbmdDb2xvciA9IFwiZ3JlZW5cIjtcclxuXHJcblx0XHRcdFx0Y29uc3QgbGFzdERyb3BJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0XHRsYXN0RHJvcEl0ZW0uc2V0QXR0cmlidXRlKFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiLFxyXG5cdFx0XHRcdFx0XCJtYWluLXJvdWxldHRlX19sYXN0ZHJvcHMtaXRlbSBtYWluLXJvdWxldHRlX19sYXN0ZHJvcHMtaXRlbS0tZ3JlZW5cIlxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmIChsYXN0RHJvcHNDaGlsZENvdW50ID09PSA2KSB7XHJcblx0XHRcdFx0XHRsYXN0RHJvcHMuZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRsYXN0RHJvcHMuYXBwZW5kKGxhc3REcm9wSXRlbSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGxhc3REcm9wcy5hcHBlbmQobGFzdERyb3BJdGVtKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKHBsYXllckJldCA9PT0gXCJncmVlblwiKSB7XHJcblx0XHRcdFx0XHRwbGF5ZXJCZXRBbW91bnQgPSBwbGF5ZXJCZXRBbW91bnQgKiAxNDtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHBsYXllckJldEFtb3VudCk7XHJcblx0XHRcdFx0XHRsZXQgYW1vdW50VmFsdWUgPSBwYXJzZUZsb2F0KGJhbGFuY2VBbW91bnQudGV4dENvbnRlbnQpO1xyXG5cdFx0XHRcdFx0bGV0IHZhbHVlID0gYW1vdW50VmFsdWUgKyBwbGF5ZXJCZXRBbW91bnQ7XHJcblxyXG5cdFx0XHRcdFx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IHZhbHVlLnRvRml4ZWQoMik7XHJcblx0XHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHBsYXllckJldCA9IDA7XHJcblx0fSwgNjAwMCk7XHJcblxyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0cm91bGV0dGVEaXYuY2xhc3NMaXN0LnJlbW92ZShcInNwaW5cIik7XHJcblx0XHRyb3VsZXR0ZURpdi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwgMCwgMClgO1xyXG5cdH0sIDk5MDApO1xyXG59LCAxMDAwMCk7XHJcblxyXG5jb25zdCBiZXRBbW91bnRSZWQgPSAoKSA9PiB7XHJcblx0Y29uc3QgYmFsYW5jZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKTtcclxuXHJcblx0aWYgKFxyXG5cdFx0YmV0SW5wdXQudmFsdWUgIT09IDAgJiZcclxuXHRcdGJldElucHV0LnZhbHVlIDw9IGJhbGFuY2UgJiZcclxuXHRcdHBsYXllckJldCA9PT0gMCAmJlxyXG5cdFx0c3Bpbm5pbmcgPT09IGZhbHNlXHJcblx0KSB7XHJcblx0XHRsZXQgYW1vdW50VmFsdWUgPSBwYXJzZUZsb2F0KGJhbGFuY2VBbW91bnQudGV4dENvbnRlbnQpO1xyXG5cdFx0bGV0IHZhbHVlID0gYW1vdW50VmFsdWUgLSBiZXRJbnB1dC52YWx1ZTtcclxuXHRcdHBsYXllckJldCA9IFwicmVkXCI7XHJcblx0XHRwbGF5ZXJCZXRBbW91bnQgPSBiZXRJbnB1dC52YWx1ZTtcclxuXHJcblx0XHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBiZXRBbW91bnRCbGFjayA9ICgpID0+IHtcclxuXHRjb25zdCBiYWxhbmNlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpO1xyXG5cclxuXHRpZiAoXHJcblx0XHRiZXRJbnB1dC52YWx1ZSAhPT0gMCAmJlxyXG5cdFx0YmV0SW5wdXQudmFsdWUgPD0gYmFsYW5jZSAmJlxyXG5cdFx0cGxheWVyQmV0ID09PSAwICYmXHJcblx0XHRzcGlubmluZyA9PT0gZmFsc2VcclxuXHQpIHtcclxuXHRcdGxldCBhbW91bnRWYWx1ZSA9IHBhcnNlRmxvYXQoYmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCk7XHJcblx0XHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSAtIGJldElucHV0LnZhbHVlO1xyXG5cdFx0cGxheWVyQmV0ID0gXCJibGFja1wiO1xyXG5cdFx0cGxheWVyQmV0QW1vdW50ID0gYmV0SW5wdXQudmFsdWU7XHJcblxyXG5cdFx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IHZhbHVlLnRvRml4ZWQoMik7XHJcblxyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJCYWxhbmNlXCIsIGAke2JhbGFuY2VBbW91bnQudGV4dENvbnRlbnR9YCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgYmV0QW1vdW50R3JlZW4gPSAoKSA9PiB7XHJcblx0Y29uc3QgYmFsYW5jZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKTtcclxuXHJcblx0aWYgKFxyXG5cdFx0YmV0SW5wdXQudmFsdWUgIT09IDAgJiZcclxuXHRcdGJldElucHV0LnZhbHVlIDw9IGJhbGFuY2UgJiZcclxuXHRcdHBsYXllckJldCA9PT0gMCAmJlxyXG5cdFx0c3Bpbm5pbmcgPT09IGZhbHNlXHJcblx0KSB7XHJcblx0XHRsZXQgYW1vdW50VmFsdWUgPSBwYXJzZUZsb2F0KGJhbGFuY2VBbW91bnQudGV4dENvbnRlbnQpO1xyXG5cdFx0bGV0IHZhbHVlID0gYW1vdW50VmFsdWUgLSBiZXRJbnB1dC52YWx1ZTtcclxuXHRcdHBsYXllckJldCA9IFwiZ3JlZW5cIjtcclxuXHRcdHBsYXllckJldEFtb3VudCA9IGJldElucHV0LnZhbHVlO1xyXG5cclxuXHRcdGJhbGFuY2VBbW91bnQudGV4dENvbnRlbnQgPSB2YWx1ZS50b0ZpeGVkKDIpO1xyXG5cclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiQmFsYW5jZVwiLCBgJHtiYWxhbmNlQW1vdW50LnRleHRDb250ZW50fWApO1xyXG5cdH1cclxufTtcclxuXHJcbnJlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYmV0QW1vdW50UmVkKTtcclxuZ3JlZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJldEFtb3VudEdyZWVuKTtcclxuYmxhY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJldEFtb3VudEJsYWNrKTtcclxuIl19
