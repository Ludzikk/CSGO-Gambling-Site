"use strict";var crashGoing,timerOnStart,timerOnStartCheck,timerNormal,timerNormalCheck,betAmount,lastBetAmount,moveUp,multiplier=document.querySelector(".main-crash__multiplier-text"),betBtn=document.querySelector(".main-crash__bet"),withdrawBtn=document.querySelector(".main-crash__bet--withdraw"),betInput=document.querySelector(".main-crash__input"),timer=document.querySelector(".main-crash__countdown-timer-seconds"),balanceAmountMobile=document.querySelector(".nav__balance-amount"),clearBtn=document.querySelector("#clear"),lastBtn=document.querySelector("#last"),plusOneBtn=document.querySelector("#plus1"),plusTenBtn=document.querySelector("#plus10"),plusOneHundredBtn=document.querySelector("#plus100"),plusOneThousandBtn=document.querySelector("#plus1000"),halfBtn=document.querySelector("#half"),timesTwoBtn=document.querySelector("#x2"),maxBtn=document.querySelector("#max"),winAudio=new Audio("./dist/audio/win.wav"),betAudio=new Audio("./dist/audio/bet.wav"),lastDropsBox=document.querySelector(".main-crash__lastdrops"),withdrawAmount=document.querySelector(".main-crash__withdrawamount"),multiplierAmount=1,speed=100,crashGoingStatus=!1,secondTime=15,didBet=!1,withdrawed=!1,startCrash=function(){var t=Math.floor(25*Math.random()+5),t=Math.floor(5e5*Math.random())/t;multiplier.style.color="white",crashGoingStatus=!0,timer.classList.remove("crash-time-text-start"),setTimeout(function(){clearInterval(timerOnStart),clearInterval(timerOnStartCheck),clearInterval(timerNormal),clearInterval(timerNormalCheck)},100),crashGoing=setInterval(function(){var t;multiplierAmount<2?multiplierAmount+=.01:2<multiplierAmount&&multiplierAmount<3?multiplierAmount+=.02:3<multiplierAmount&&multiplierAmount<4?multiplierAmount+=.03:4<multiplierAmount&&multiplierAmount<5?multiplierAmount+=.04:5<multiplierAmount&&multiplierAmount<6?multiplierAmount+=.05:6<multiplierAmount&&multiplierAmount<10?multiplierAmount+=.06:10<multiplierAmount&&multiplierAmount<20?multiplierAmount+=.08:20<multiplierAmount&&multiplierAmount<50?multiplierAmount+=.12:50<multiplierAmount&&(multiplierAmount+=.18),multiplier.textContent=multiplierAmount.toFixed(2)+"x",!1===withdrawed&&0<betAmount&&!0===crashGoingStatus?(t=betAmount*multiplierAmount,withdrawAmount.textContent=t.toFixed(2)):!0===withdrawed&&(withdrawAmount.textContent="0.00")},speed),setTimeout(function(){stopCrash()},Math.floor(t))},stopCrash=function(){var t;8===lastDropsBox.childElementCount?(lastDropsBox.firstElementChild.remove(),(t=document.createElement("p")).setAttribute("class","main-crash__lastdropitem"),t.textContent=multiplierAmount.toFixed(2)+"x",2<=multiplierAmount&&multiplierAmount<4?t.style.color="#00a941":4<=multiplierAmount&&multiplierAmount<8?t.style.color="yellow":8<=multiplierAmount?t.style.color="#0d8aff":multiplierAmount<1.2&&(t.style.color="#de4c41"),lastDropsBox.append(t)):((t=document.createElement("p")).setAttribute("class","main-crash__lastdropitem"),t.textContent=multiplierAmount.toFixed(2)+"x",2<=multiplierAmount&&multiplierAmount<4?t.style.color="#00a941":4<=multiplierAmount&&multiplierAmount<8?t.style.color="yellow":8<=multiplierAmount?t.style.color="#0d8aff":multiplierAmount<1.2&&(t.style.color="#de4c41"),lastDropsBox.append(t)),clearInterval(crashGoing),crashGoingStatus=!1,multiplierAmount=1,didBet=!(secondTime=15),multiplier.style.color="#de4c41",betAmount=0,withdrawAmount.textContent="0.00",startTimer(),setTimeout(function(){startCrash()},15e3)},startTimer=function(){timer.classList.add("crash-time-text-start"),timerNormal=setInterval(function(){secondTime--,timer.textContent=secondTime+"s"},1e3),timerNormalCheck=setInterval(function(){0===secondTime&&(secondTime=15,timer.textContent=secondTime+"s")})},startTimerOnEnter=function(){timer.classList.add("crash-time-text-start"),timerOnStart=setInterval(function(){secondTime--,timer.textContent=secondTime+"s"},1e3),timerOnStartCheck=setInterval(function(){0===secondTime&&(secondTime=15,timer.textContent=secondTime+"s")})},playerBet=function(){var t=localStorage.getItem("Balance");0<betInput.value&&!1===crashGoingStatus&&!1===didBet&&betInput.value<=parseFloat(t)&&(didBet=!0,lastBetAmount=betAmount,betInput.value=0,betAudio.play(),withdrawed=!1,withdrawAmount.textContent=Number(betAmount).toFixed(2),removeBalance())},removeBalance=function(){var t=parseFloat(balanceAmount.textContent)-betAmount;balanceAmount.textContent=t.toFixed(2),balanceAmountMobile.textContent=t.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent))},addMoneyToBalance=function(){var t,e,n,o;!0===didBet&&!0===crashGoingStatus&&(winAudio.play(),withdrawed=!(didBet=!1),betAmount*=multiplierAmount,e=parseFloat(balanceAmount.textContent)+betAmount,balanceAmount.textContent=e.toFixed(2),balanceAmountMobile.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)),(t=document.createElement("p")).setAttribute("class","win"),t.textContent=betAmount.toFixed(2),e=Math.floor(30*Math.random()+20),n=Math.floor(35*Math.random()+30),t.style.top="".concat(e,"%"),t.style.left="".concat(n,"%"),document.body.append(t),o=e,moveUp=setInterval(function(){o-=.5,t.style.top="".concat(o,"%")},100),setTimeout(function(){document.body.lastElementChild.remove(),clearInterval(moveUp)},2e3))},createRandomLastDrops=function(){for(var t=0;t<8;t++){var e=4*Math.random()+1,n=document.createElement("p");n.setAttribute("class","main-crash__lastdropitem"),n.textContent=e.toFixed(2)+"x",2<=e&&e<4?n.style.color="#00a941":4<=e&&e<8?n.style.color="yellow":8<=e?n.style.color="#0d8aff":e<1.2&&(n.style.color="#de4c41"),lastDropsBox.append(n)}};setTimeout(function(){startCrash()},15e3),startTimerOnEnter(),createRandomLastDrops(),betBtn.addEventListener("click",function(){betAmount=betInput.value,playerBet()}),withdrawBtn.addEventListener("click",function(){addMoneyToBalance()}),clearBtn.addEventListener("click",function(){betInput.value=0}),lastBtn.addEventListener("click",function(){0!==lastBetAmount&&(betInput.value=lastBetAmount)}),plusOneBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+1}),plusTenBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+10}),plusOneHundredBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+100}),plusOneThousandBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+1e3}),halfBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t/2}),timesTwoBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=2*t}),maxBtn.addEventListener("click",function(){betInput.value=localStorage.getItem("Balance")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyYXNoLmpzIl0sIm5hbWVzIjpbIm11bHRpcGxpZXJBbW91bnQiLCJjcmFzaEdvaW5nU3RhdHVzIiwic2Vjb25kVGltZSIsInRpbWVyT25TdGFydCIsInRpbWVyT25TdGFydENoZWNrIiwidGltZXJOb3JtYWwiLCJiZXRBbW91bnQiLCJsYXN0QmV0QW1vdW50IiwibXVsdGlwbGllciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJldEJ0biIsIndpdGhkcmF3QnRuIiwiYmV0SW5wdXQiLCJ0aW1lciIsImJhbGFuY2VBbW91bnRNb2JpbGUiLCJjbGVhckJ0biIsImxhc3RCdG4iLCJwbHVzT25lQnRuIiwicGx1c1RlbkJ0biIsInBsdXNPbmVIdW5kcmVkQnRuIiwicGx1c09uZVRob3VzYW5kQnRuIiwiaGFsZkJ0biIsInRpbWVzVHdvQnRuIiwibWF4QnRuIiwiQXVkaW8iLCJ3aW5BdWRpbyIsImJldEF1ZGlvIiwibGFzdERyb3BzQm94Iiwid2l0aGRyYXdBbW91bnQiLCJzcGVlZCIsImNyYXNoR29pbmciLCJ0aW1lck5vcm1hbENoZWNrIiwiZGlkQmV0IiwibW92ZVVwIiwic3RhcnRDcmFzaCIsIk1hdGgiLCJyYW5kb20iLCJjcmFzaFRpbWUiLCJjcmFzaFRpbWVEaXZpZGUiLCJmbG9vciIsInN0eWxlIiwiY29sb3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJzZXRUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsIndpdGhkcmF3UGxheWVyQW1vdW50IiwidG9GaXhlZCIsIndpdGhkcmF3ZWQiLCJ0ZXh0Q29udGVudCIsInN0b3BDcmFzaCIsImZpcnN0RWxlbWVudENoaWxkIiwibGFzdERyb3BzSXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJzdGFydFRpbWVyIiwiYXBwZW5kIiwic3RhcnRUaW1lck9uRW50ZXIiLCJhZGQiLCJzZXRJbnRlcnZhbCIsInBsYXkiLCJOdW1iZXIiLCJyZW1vdmVCYWxhbmNlIiwiYW1vdW50VmFsdWUiLCJ2YWx1ZSIsImFkZE1vbmV5VG9CYWxhbmNlIiwibG9jYWxTdG9yYWdlIiwicGFyc2VGbG9hdCIsImJhbGFuY2UiLCJiYWxhbmNlQW1vdW50Iiwid2luUG9wVXAiLCJyYW5kb21Gcm9tTGVmdCIsImNvbmNhdCIsIm1vdmVVcFZhbHVlIiwicmFuZG9tRnJvbVRvcCIsImNyZWF0ZVJhbmRvbUxhc3REcm9wcyIsInJhbmRvbVZhbHVlIiwidG9wIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXllckJldCIsImdldEl0ZW0iXSwibWFwcGluZ3MiOiJhQUFBLElBbUJJQSxXQUdBQyxhQUNBQyxrQkFDQUMsWUFDQUMsaUJBQ0FDLFVBRUFDLGNBRUFDLE9BOUJFQyxXQUFhQyxTQUFTQyxjQUFjLDhCQUE4QixFQUNsRUMsT0FBU0YsU0FBU0MsY0FBYyxrQkFBa0IsRUFEbERGLFlBQWFDLFNBQVNDLGNBQWMsNEJBQStCLEVBQ25FQyxTQUFTRixTQUFTQyxjQUFjLG9CQUFtQixFQUNuREUsTUFBQUEsU0FBY0gsY0FBU0Msc0NBQTJDLEVBQ2xFRyxvQkFBb0JILFNBQWFBLGNBQUMsc0JBQXFCLEVBQ3ZESSxTQUFRTCxTQUFTQyxjQUFjLFFBQUEsRUFDL0JLLFFBQUFBLFNBQW1CTCxjQUFZQSxPQUFBQSxFQUMvQk0sV0FBV1AsU0FBU0MsY0FBYyxRQUFTLEVBQzNDTyxXQUFVUixTQUFTQyxjQUFjLFNBQVEsRUFDekNRLGtCQUFzQlIsU0FBQUEsY0FBdUIsVUFBQSxFQUM3Q1MsbUJBQXNCVCxTQUFBQSxjQUF3QixXQUFBLEVBQzlDVSxRQUFBQSxTQUFvQlgsY0FBU0MsT0FBYSxFQUMxQ1csWUFBQUEsU0FBcUJaLGNBQVNDLEtBQWMsRUFDNUNZLE9BQVViLFNBQVNDLGNBQWMsTUFBTyxFQUN4Q2EsU0FBVyxJQUFHZCxNQUFTQyxzQkFBb0IsRUFDM0NjLFNBQVNmLElBQVFnQixNQUFDZixzQkFBcUIsRUFDdkNnQixhQUFlRCxTQUFNZixjQUFBLHdCQUF1QixFQUM1Q2lCLGVBQWVGLFNBQU1mLGNBQUEsNkJBQXVCLEVBQzVDa0Is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LE1BQVExRCxjQUVuQixDQUFDLEVBRURXLFdBQVc2RCxpQkFBaUIsUUFBUyxXQUNwQyxJQUFJZCxFQUFRRyxXQUFXdkQsU0FBU29ELEtBQUssRUFDckNwRCxTQUFTb0QsTUFBUUEsRUFBUSxDQUMxQixDQUFDLEVBRUQ5QyxXQUFXNEQsaUJBQWlCLFFBQVMsV0FDcEMsSUFBSWQsRUFBUUcsV0FBV3ZELFNBQVNvRCxLQUFLLEVBQ3JDcEQsU0FBU29ELE1BQVFBLEVBQVEsRUFDMUIsQ0FBQyxFQUVEN0Msa0JBQWtCMkQsaUJBQWlCLFFBQVMsV0FDM0MsSUFBSWQsRUFBUUcsV0FBV3ZELFNBQVNvRCxLQUFLLEVBQ3JDcEQsU0FBU29ELE1BQVFBLEVBQVEsR0FDMUIsQ0FBQyxFQUVENUMsbUJBQW1CMEQsaUJBQWlCLFFBQVMsV0FDNUMsSUFBSWQsRUFBUUcsV0FBV3ZELFNBQVNvRCxLQUFLLEVBQ3JDcEQsU0FBU29ELE1BQVFBLEVBQVEsR0FDMUIsQ0FBQyxFQUVEM0MsUUFBUXlELGlCQUFpQixRQUFTLFdBQ2pDLElBQUlkLEVBQVFHLFdBQVd2RCxTQUFTb0QsS0FBSyxFQUNyQ3BELFNBQVNvRCxNQUFRQSxFQUFRLENBQzFCLENBQUMsRUFFRDFDLFlBQVl3RCxpQkFBaUIsUUFBUyxXQUNyQyxJQUFJZCxFQUFRRyxXQUFXdkQsU0FBU29ELEtBQUssRUFDckNwRCxTQUFTb0QsTUFBZ0IsRUFBUkEsQ0FDbEIsQ0FBQyxFQUVEekMsT0FBT3VELGlCQUFpQixRQUFTLFdBQ2hDbEUsU0FBU29ELE1BQVFFLGFBQWFjLFFBQVEsU0FBUyxDQUNoRCxDQUFDIiwiZmlsZSI6ImNyYXNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG11bHRpcGxpZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tY3Jhc2hfX211bHRpcGxpZXItdGV4dFwiKTtcclxuY29uc3QgYmV0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19iZXRcIik7XHJcbmNvbnN0IHdpdGhkcmF3QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19iZXQtLXdpdGhkcmF3XCIpO1xyXG5jb25zdCBiZXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jcmFzaF9faW5wdXRcIik7XHJcbmNvbnN0IHRpbWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19jb3VudGRvd24tdGltZXItc2Vjb25kc1wiKTtcclxuY29uc3QgYmFsYW5jZUFtb3VudE1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19iYWxhbmNlLWFtb3VudFwiKTtcclxuY29uc3QgY2xlYXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NsZWFyXCIpO1xyXG5jb25zdCBsYXN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXN0XCIpO1xyXG5jb25zdCBwbHVzT25lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbHVzMVwiKTtcclxuY29uc3QgcGx1c1RlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGx1czEwXCIpO1xyXG5jb25zdCBwbHVzT25lSHVuZHJlZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGx1czEwMFwiKTtcclxuY29uc3QgcGx1c09uZVRob3VzYW5kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbHVzMTAwMFwiKTtcclxuY29uc3QgaGFsZkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaGFsZlwiKTtcclxuY29uc3QgdGltZXNUd29CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3gyXCIpO1xyXG5jb25zdCBtYXhCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21heFwiKTtcclxuY29uc3Qgd2luQXVkaW8gPSBuZXcgQXVkaW8oXCIuL2Rpc3QvYXVkaW8vd2luLndhdlwiKTtcclxuY29uc3QgYmV0QXVkaW8gPSBuZXcgQXVkaW8oXCIuL2Rpc3QvYXVkaW8vYmV0LndhdlwiKTtcclxuY29uc3QgbGFzdERyb3BzQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19sYXN0ZHJvcHNcIik7XHJcbmNvbnN0IHdpdGhkcmF3QW1vdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX193aXRoZHJhd2Ftb3VudFwiKTtcclxubGV0IG11bHRpcGxpZXJBbW91bnQgPSAxO1xyXG5sZXQgc3BlZWQgPSAxMDA7XHJcbmxldCBjcmFzaEdvaW5nO1xyXG5sZXQgY3Jhc2hHb2luZ1N0YXR1cyA9IGZhbHNlO1xyXG5sZXQgc2Vjb25kVGltZSA9IDE1O1xyXG5sZXQgdGltZXJPblN0YXJ0O1xyXG5sZXQgdGltZXJPblN0YXJ0Q2hlY2s7XHJcbmxldCB0aW1lck5vcm1hbDtcclxubGV0IHRpbWVyTm9ybWFsQ2hlY2s7XHJcbmxldCBiZXRBbW91bnQ7XHJcbmxldCBkaWRCZXQgPSBmYWxzZTtcclxubGV0IGxhc3RCZXRBbW91bnQ7XHJcbmxldCB3aXRoZHJhd2VkID0gZmFsc2U7XHJcbmxldCBtb3ZlVXA7XHJcblxyXG5jb25zdCBzdGFydENyYXNoID0gKCkgPT4ge1xyXG5cdGNvbnN0IGNyYXNoVGltZURpdmlkZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1ICsgNSk7XHJcblx0Y29uc3QgY3Jhc2hUaW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwMDAwKTtcclxuXHRjb25zdCBjcmFzaEFmdGVyID0gY3Jhc2hUaW1lIC8gY3Jhc2hUaW1lRGl2aWRlO1xyXG5cclxuXHRtdWx0aXBsaWVyLnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xyXG5cdGNyYXNoR29pbmdTdGF0dXMgPSB0cnVlO1xyXG5cdHRpbWVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjcmFzaC10aW1lLXRleHQtc3RhcnRcIik7XHJcblx0Ly8gY29uc29sZS5sb2coTWF0aC5mbG9vcihjcmFzaEFmdGVyKSk7XHJcblxyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aW1lck9uU3RhcnQpO1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aW1lck9uU3RhcnRDaGVjayk7XHJcblx0XHRjbGVhckludGVydmFsKHRpbWVyTm9ybWFsKTtcclxuXHRcdGNsZWFySW50ZXJ2YWwodGltZXJOb3JtYWxDaGVjayk7XHJcblx0fSwgMTAwKTtcclxuXHJcblx0Y3Jhc2hHb2luZyA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdGlmIChtdWx0aXBsaWVyQW1vdW50IDwgMikge1xyXG5cdFx0XHRtdWx0aXBsaWVyQW1vdW50ICs9IDAuMDE7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPiAyICYmIG11bHRpcGxpZXJBbW91bnQgPCAzKSB7XHJcblx0XHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wMjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+IDMgJiYgbXVsdGlwbGllckFtb3VudCA8IDQpIHtcclxuXHRcdFx0bXVsdGlwbGllckFtb3VudCArPSAwLjAzO1xyXG5cdFx0fSBlbHNlIGlmIChtdWx0aXBsaWVyQW1vdW50ID4gNCAmJiBtdWx0aXBsaWVyQW1vdW50IDwgNSkge1xyXG5cdFx0XHRtdWx0aXBsaWVyQW1vdW50ICs9IDAuMDQ7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPiA1ICYmIG11bHRpcGxpZXJBbW91bnQgPCA2KSB7XHJcblx0XHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wNTtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+IDYgJiYgbXVsdGlwbGllckFtb3VudCA8IDEwKSB7XHJcblx0XHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wNjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+IDEwICYmIG11bHRpcGxpZXJBbW91bnQgPCAyMCkge1xyXG5cdFx0XHRtdWx0aXBsaWVyQW1vdW50ICs9IDAuMDg7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPiAyMCAmJiBtdWx0aXBsaWVyQW1vdW50IDwgNTApIHtcclxuXHRcdFx0bXVsdGlwbGllckFtb3VudCArPSAwLjEyO1xyXG5cdFx0fSBlbHNlIGlmIChtdWx0aXBsaWVyQW1vdW50ID4gNTApIHtcclxuXHRcdFx0bXVsdGlwbGllckFtb3VudCArPSAwLjE4O1xyXG5cdFx0fVxyXG5cclxuXHRcdG11bHRpcGxpZXIudGV4dENvbnRlbnQgPSBtdWx0aXBsaWVyQW1vdW50LnRvRml4ZWQoMikgKyBcInhcIjtcclxuXHJcblx0XHRpZiAod2l0aGRyYXdlZCA9PT0gZmFsc2UgJiYgYmV0QW1vdW50ID4gMCAmJiBjcmFzaEdvaW5nU3RhdHVzID09PSB0cnVlKSB7XHJcblx0XHRcdGNvbnN0IHdpdGhkcmF3UGxheWVyQW1vdW50ID0gYmV0QW1vdW50ICogbXVsdGlwbGllckFtb3VudDtcclxuXHRcdFx0d2l0aGRyYXdBbW91bnQudGV4dENvbnRlbnQgPSB3aXRoZHJhd1BsYXllckFtb3VudC50b0ZpeGVkKDIpO1xyXG5cdFx0fSBlbHNlIGlmICh3aXRoZHJhd2VkID09PSB0cnVlKSB7XHJcblx0XHRcdHdpdGhkcmF3QW1vdW50LnRleHRDb250ZW50ID0gXCIwLjAwXCI7XHJcblx0XHR9XHJcblx0fSwgc3BlZWQpO1xyXG5cclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdHN0b3BDcmFzaCgpO1xyXG5cdH0sIE1hdGguZmxvb3IoY3Jhc2hBZnRlcikpO1xyXG59O1xyXG5cclxuY29uc3Qgc3RvcENyYXNoID0gKCkgPT4ge1xyXG5cdGlmIChsYXN0RHJvcHNCb3guY2hpbGRFbGVtZW50Q291bnQgPT09IDgpIHtcclxuXHRcdGxhc3REcm9wc0JveC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTtcclxuXHJcblx0XHRjb25zdCBsYXN0RHJvcHNJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRsYXN0RHJvcHNJdGVtLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbi1jcmFzaF9fbGFzdGRyb3BpdGVtXCIpO1xyXG5cdFx0bGFzdERyb3BzSXRlbS50ZXh0Q29udGVudCA9IG11bHRpcGxpZXJBbW91bnQudG9GaXhlZCgyKSArIFwieFwiO1xyXG5cclxuXHRcdGlmIChtdWx0aXBsaWVyQW1vdW50ID49IDIgJiYgbXVsdGlwbGllckFtb3VudCA8IDQpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwiIzAwYTk0MVwiO1xyXG5cdFx0fSBlbHNlIGlmIChtdWx0aXBsaWVyQW1vdW50ID49IDQgJiYgbXVsdGlwbGllckFtb3VudCA8IDgpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwieWVsbG93XCI7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPj0gOCkge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjMGQ4YWZmXCI7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPCAxLjIpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwiI2RlNGM0MVwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxhc3REcm9wc0JveC5hcHBlbmQobGFzdERyb3BzSXRlbSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IGxhc3REcm9wc0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuXHRcdGxhc3REcm9wc0l0ZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtYWluLWNyYXNoX19sYXN0ZHJvcGl0ZW1cIik7XHJcblx0XHRsYXN0RHJvcHNJdGVtLnRleHRDb250ZW50ID0gbXVsdGlwbGllckFtb3VudC50b0ZpeGVkKDIpICsgXCJ4XCI7XHJcblxyXG5cdFx0aWYgKG11bHRpcGxpZXJBbW91bnQgPj0gMiAmJiBtdWx0aXBsaWVyQW1vdW50IDwgNCkge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjMDBhOTQxXCI7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPj0gNCAmJiBtdWx0aXBsaWVyQW1vdW50IDwgOCkge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCJ5ZWxsb3dcIjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+PSA4KSB7XHJcblx0XHRcdGxhc3REcm9wc0l0ZW0uc3R5bGUuY29sb3IgPSBcIiMwZDhhZmZcIjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA8IDEuMikge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjZGU0YzQxXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0bGFzdERyb3BzQm94LmFwcGVuZChsYXN0RHJvcHNJdGVtKTtcclxuXHR9XHJcblxyXG5cdGNsZWFySW50ZXJ2YWwoY3Jhc2hHb2luZyk7XHJcblx0Y3Jhc2hHb2luZ1N0YXR1cyA9IGZhbHNlO1xyXG5cdG11bHRpcGxpZXJBbW91bnQgPSAxO1xyXG5cdHNlY29uZFRpbWUgPSAxNTtcclxuXHRkaWRCZXQgPSBmYWxzZTtcclxuXHRtdWx0aXBsaWVyLnN0eWxlLmNvbG9yID0gXCIjZGU0YzQxXCI7XHJcblx0YmV0QW1vdW50ID0gMDtcclxuXHR3aXRoZHJhd0Ftb3VudC50ZXh0Q29udGVudCA9IFwiMC4wMFwiO1xyXG5cdHN0YXJ0VGltZXIoKTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRzdGFydENyYXNoKCk7XHJcblx0fSwgMTUwMDApO1xyXG59O1xyXG5cclxuY29uc3Qgc3RhcnRUaW1lciA9ICgpID0+IHtcclxuXHR0aW1lci5jbGFzc0xpc3QuYWRkKFwiY3Jhc2gtdGltZS10ZXh0LXN0YXJ0XCIpO1xyXG5cclxuXHR0aW1lck5vcm1hbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdHNlY29uZFRpbWUtLTtcclxuXHRcdHRpbWVyLnRleHRDb250ZW50ID0gc2Vjb25kVGltZSArIFwic1wiO1xyXG5cdH0sIDEwMDApO1xyXG5cclxuXHR0aW1lck5vcm1hbENoZWNrID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0aWYgKHNlY29uZFRpbWUgPT09IDApIHtcclxuXHRcdFx0c2Vjb25kVGltZSA9IDE1O1xyXG5cdFx0XHR0aW1lci50ZXh0Q29udGVudCA9IHNlY29uZFRpbWUgKyBcInNcIjtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IHN0YXJ0VGltZXJPbkVudGVyID0gKCkgPT4ge1xyXG5cdHRpbWVyLmNsYXNzTGlzdC5hZGQoXCJjcmFzaC10aW1lLXRleHQtc3RhcnRcIik7XHJcblxyXG5cdHRpbWVyT25TdGFydCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdHNlY29uZFRpbWUtLTtcclxuXHRcdHRpbWVyLnRleHRDb250ZW50ID0gc2Vjb25kVGltZSArIFwic1wiO1xyXG5cdH0sIDEwMDApO1xyXG5cclxuXHR0aW1lck9uU3RhcnRDaGVjayA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdGlmIChzZWNvbmRUaW1lID09PSAwKSB7XHJcblx0XHRcdHNlY29uZFRpbWUgPSAxNTtcclxuXHRcdFx0dGltZXIudGV4dENvbnRlbnQgPSBzZWNvbmRUaW1lICsgXCJzXCI7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBwbGF5ZXJCZXQgPSAoKSA9PiB7XHJcblx0Y29uc3QgYmFsYW5jZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKTtcclxuXHJcblx0aWYgKGJldElucHV0LnZhbHVlID4gMCAmJiBjcmFzaEdvaW5nU3RhdHVzID09PSBmYWxzZSAmJiBkaWRCZXQgPT09IGZhbHNlICYmIGJldElucHV0LnZhbHVlIDw9IHBhcnNlRmxvYXQoYmFsYW5jZSkpIHtcclxuXHRcdGRpZEJldCA9IHRydWU7XHJcblx0XHRsYXN0QmV0QW1vdW50ID0gYmV0QW1vdW50O1xyXG5cdFx0YmV0SW5wdXQudmFsdWUgPSAwO1xyXG5cdFx0YmV0QXVkaW8ucGxheSgpO1xyXG5cdFx0d2l0aGRyYXdlZCA9IGZhbHNlO1xyXG5cdFx0d2l0aGRyYXdBbW91bnQudGV4dENvbnRlbnQgPSBOdW1iZXIoYmV0QW1vdW50KS50b0ZpeGVkKDIpO1xyXG5cdFx0cmVtb3ZlQmFsYW5jZSgpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZUJhbGFuY2UgPSAoKSA9PiB7XHJcblx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSAtIGJldEFtb3VudDtcclxuXHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRiYWxhbmNlQW1vdW50TW9iaWxlLnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxufTtcclxuXHJcbmNvbnN0IGFkZE1vbmV5VG9CYWxhbmNlID0gKCkgPT4ge1xyXG5cdGlmIChkaWRCZXQgPT09IHRydWUgJiYgY3Jhc2hHb2luZ1N0YXR1cyA9PT0gdHJ1ZSkge1xyXG5cdFx0d2luQXVkaW8ucGxheSgpO1xyXG5cdFx0ZGlkQmV0ID0gZmFsc2U7XHJcblx0XHR3aXRoZHJhd2VkID0gdHJ1ZTtcclxuXHRcdGJldEFtb3VudCAqPSBtdWx0aXBsaWVyQW1vdW50O1xyXG5cdFx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRcdGxldCB2YWx1ZSA9IGFtb3VudFZhbHVlICsgYmV0QW1vdW50O1xyXG5cdFx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IHZhbHVlLnRvRml4ZWQoMik7XHJcblx0XHRiYWxhbmNlQW1vdW50TW9iaWxlLnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiQmFsYW5jZVwiLCBgJHtiYWxhbmNlQW1vdW50LnRleHRDb250ZW50fWApO1xyXG5cclxuXHRcdGNvbnN0IHdpblBvcFVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHR3aW5Qb3BVcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIndpblwiKTtcclxuXHRcdHdpblBvcFVwLnRleHRDb250ZW50ID0gYmV0QW1vdW50LnRvRml4ZWQoMik7XHJcblx0XHRjb25zdCByYW5kb21Gcm9tVG9wID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzAgKyAyMCk7XHJcblx0XHRjb25zdCByYW5kb21Gcm9tTGVmdCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM1ICsgMzApO1xyXG5cclxuXHRcdHdpblBvcFVwLnN0eWxlLnRvcCA9IGAke3JhbmRvbUZyb21Ub3B9JWA7XHJcblx0XHR3aW5Qb3BVcC5zdHlsZS5sZWZ0ID0gYCR7cmFuZG9tRnJvbUxlZnR9JWA7XHJcblxyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmQod2luUG9wVXApO1xyXG5cclxuXHRcdGxldCBtb3ZlVXBWYWx1ZSA9IHJhbmRvbUZyb21Ub3A7XHJcblxyXG5cdFx0bW92ZVVwID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRtb3ZlVXBWYWx1ZSAtPSAwLjU7XHJcblx0XHRcdHdpblBvcFVwLnN0eWxlLnRvcCA9IGAke21vdmVVcFZhbHVlfSVgO1xyXG5cdFx0fSwgMTAwKTtcclxuXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5sYXN0RWxlbWVudENoaWxkLnJlbW92ZSgpO1xyXG5cdFx0XHRjbGVhckludGVydmFsKG1vdmVVcCk7XHJcblx0XHR9LCAyMDAwKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVSYW5kb21MYXN0RHJvcHMgPSAoKSA9PiB7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcclxuXHRcdGNvbnN0IHJhbmRvbVZhbHVlID0gTWF0aC5yYW5kb20oKSAqIDQgKyAxO1xyXG5cdFx0Y29uc3QgbGFzdERyb3BzSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cdFx0bGFzdERyb3BzSXRlbS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1haW4tY3Jhc2hfX2xhc3Rkcm9waXRlbVwiKTtcclxuXHRcdGxhc3REcm9wc0l0ZW0udGV4dENvbnRlbnQgPSByYW5kb21WYWx1ZS50b0ZpeGVkKDIpICsgXCJ4XCI7XHJcblxyXG5cdFx0aWYgKHJhbmRvbVZhbHVlID49IDIgJiYgcmFuZG9tVmFsdWUgPCA0KSB7XHJcblx0XHRcdGxhc3REcm9wc0l0ZW0uc3R5bGUuY29sb3IgPSBcIiMwMGE5NDFcIjtcclxuXHRcdH0gZWxzZSBpZiAocmFuZG9tVmFsdWUgPj0gNCAmJiByYW5kb21WYWx1ZSA8IDgpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwieWVsbG93XCI7XHJcblx0XHR9IGVsc2UgaWYgKHJhbmRvbVZhbHVlID49IDgpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwiIzBkOGFmZlwiO1xyXG5cdFx0fSBlbHNlIGlmIChyYW5kb21WYWx1ZSA8IDEuMikge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjZGU0YzQxXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0bGFzdERyb3BzQm94LmFwcGVuZChsYXN0RHJvcHNJdGVtKTtcclxuXHR9XHJcbn07XHJcblxyXG5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRzdGFydENyYXNoKCk7XHJcbn0sIDE1MDAwKTtcclxuXHJcbnN0YXJ0VGltZXJPbkVudGVyKCk7XHJcbmNyZWF0ZVJhbmRvbUxhc3REcm9wcygpO1xyXG5cclxuYmV0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0YmV0QW1vdW50ID0gYmV0SW5wdXQudmFsdWU7XHJcblx0cGxheWVyQmV0KCk7XHJcbn0pO1xyXG5cclxud2l0aGRyYXdCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRhZGRNb25leVRvQmFsYW5jZSgpO1xyXG59KTtcclxuXHJcbmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0YmV0SW5wdXQudmFsdWUgPSAwO1xyXG59KTtcclxuXHJcbmxhc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRpZiAobGFzdEJldEFtb3VudCAhPT0gMCkge1xyXG5cdFx0YmV0SW5wdXQudmFsdWUgPSBsYXN0QmV0QW1vdW50O1xyXG5cdH1cclxufSk7XHJcblxyXG5wbHVzT25lQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0bGV0IHZhbHVlID0gcGFyc2VGbG9hdChiZXRJbnB1dC52YWx1ZSk7XHJcblx0YmV0SW5wdXQudmFsdWUgPSB2YWx1ZSArIDE7XHJcbn0pO1xyXG5cclxucGx1c1RlbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQoYmV0SW5wdXQudmFsdWUpO1xyXG5cdGJldElucHV0LnZhbHVlID0gdmFsdWUgKyAxMDtcclxufSk7XHJcblxyXG5wbHVzT25lSHVuZHJlZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQoYmV0SW5wdXQudmFsdWUpO1xyXG5cdGJldElucHV0LnZhbHVlID0gdmFsdWUgKyAxMDA7XHJcbn0pO1xyXG5cclxucGx1c09uZVRob3VzYW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0bGV0IHZhbHVlID0gcGFyc2VGbG9hdChiZXRJbnB1dC52YWx1ZSk7XHJcblx0YmV0SW5wdXQudmFsdWUgPSB2YWx1ZSArIDEwMDA7XHJcbn0pO1xyXG5cclxuaGFsZkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQoYmV0SW5wdXQudmFsdWUpO1xyXG5cdGJldElucHV0LnZhbHVlID0gdmFsdWUgLyAyO1xyXG59KTtcclxuXHJcbnRpbWVzVHdvQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0bGV0IHZhbHVlID0gcGFyc2VGbG9hdChiZXRJbnB1dC52YWx1ZSk7XHJcblx0YmV0SW5wdXQudmFsdWUgPSB2YWx1ZSAqIDI7XHJcbn0pO1xyXG5cclxubWF4QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0YmV0SW5wdXQudmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkJhbGFuY2VcIik7XHJcbn0pO1xyXG4iXX0=
