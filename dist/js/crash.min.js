"use strict";var crashGoing,timerOnStart,timerOnStartCheck,timerNormal,timerNormalCheck,betAmount,lastBetAmount,moveUp,multiplier=document.querySelector(".main-crash__multiplier-text"),betBtn=document.querySelector(".main-crash__bet"),withdrawBtn=document.querySelector(".main-crash__bet--withdraw"),betInput=document.querySelector(".main-crash__input"),timer=document.querySelector(".main-crash__countdown-timer-seconds"),clearBtn=document.querySelector("#clear"),lastBtn=document.querySelector("#last"),plusOneBtn=document.querySelector("#plus1"),plusTenBtn=document.querySelector("#plus10"),plusOneHundredBtn=document.querySelector("#plus100"),plusOneThousandBtn=document.querySelector("#plus1000"),halfBtn=document.querySelector("#half"),timesTwoBtn=document.querySelector("#x2"),maxBtn=document.querySelector("#max"),winAudio=new Audio("./dist/audio/win.wav"),betAudio=new Audio("./dist/audio/bet.wav"),lastDropsBox=document.querySelector(".main-crash__lastdrops"),withdrawAmount=document.querySelector(".main-crash__withdrawamount"),multiplierAmount=1,speed=100,crashGoingStatus=!1,secondTime=15,didBet=!1,withdrawed=!1,startCrash=function(){var t=Math.floor(25*Math.random()+5),t=Math.floor(5e5*Math.random())/t;multiplier.style.color="white",crashGoingStatus=!0,timer.classList.remove("crash-time-text-start"),setTimeout(function(){clearInterval(timerOnStart),clearInterval(timerOnStartCheck),clearInterval(timerNormal),clearInterval(timerNormalCheck)},100),crashGoing=setInterval(function(){var t;multiplierAmount<2?multiplierAmount+=.01:2<multiplierAmount&&multiplierAmount<3?multiplierAmount+=.02:3<multiplierAmount&&multiplierAmount<4?multiplierAmount+=.03:4<multiplierAmount&&multiplierAmount<5?multiplierAmount+=.04:5<multiplierAmount&&multiplierAmount<6?multiplierAmount+=.05:6<multiplierAmount&&multiplierAmount<10?multiplierAmount+=.06:10<multiplierAmount&&multiplierAmount<20?multiplierAmount+=.08:20<multiplierAmount&&multiplierAmount<50?multiplierAmount+=.12:50<multiplierAmount&&(multiplierAmount+=.18),multiplier.textContent=multiplierAmount.toFixed(2)+"x",!1===withdrawed&&0<betAmount&&!0===crashGoingStatus?(t=betAmount*multiplierAmount,withdrawAmount.textContent=t.toFixed(2)):!0===withdrawed&&(withdrawAmount.textContent="0.00")},speed),setTimeout(function(){stopCrash()},Math.floor(t))},stopCrash=function(){var t;8===lastDropsBox.childElementCount?(lastDropsBox.firstElementChild.remove(),(t=document.createElement("p")).setAttribute("class","main-crash__lastdropitem"),t.textContent=multiplierAmount.toFixed(2)+"x",2<=multiplierAmount&&multiplierAmount<4?t.style.color="#00a941":4<=multiplierAmount&&multiplierAmount<8?t.style.color="yellow":8<=multiplierAmount?t.style.color="#0d8aff":multiplierAmount<1.2&&(t.style.color="#de4c41"),lastDropsBox.append(t)):((t=document.createElement("p")).setAttribute("class","main-crash__lastdropitem"),t.textContent=multiplierAmount.toFixed(2)+"x",2<=multiplierAmount&&multiplierAmount<4?t.style.color="#00a941":4<=multiplierAmount&&multiplierAmount<8?t.style.color="yellow":8<=multiplierAmount?t.style.color="#0d8aff":multiplierAmount<1.2&&(t.style.color="#de4c41"),lastDropsBox.append(t)),clearInterval(crashGoing),crashGoingStatus=!1,multiplierAmount=1,didBet=!(secondTime=15),multiplier.style.color="#de4c41",betAmount=0,withdrawAmount.textContent="0.00",startTimer(),setTimeout(function(){startCrash()},15e3)},startTimer=function(){timer.classList.add("crash-time-text-start"),timerNormal=setInterval(function(){secondTime--,timer.textContent=secondTime+"s"},1e3),timerNormalCheck=setInterval(function(){0===secondTime&&(secondTime=15,timer.textContent=secondTime+"s")})},startTimerOnEnter=function(){timer.classList.add("crash-time-text-start"),timerOnStart=setInterval(function(){secondTime--,timer.textContent=secondTime+"s"},1e3),timerOnStartCheck=setInterval(function(){0===secondTime&&(secondTime=15,timer.textContent=secondTime+"s")})},playerBet=function(){0<betInput.value&&!1===crashGoingStatus&&!1===didBet&&(didBet=!0,lastBetAmount=betAmount,betInput.value=0,betAudio.play(),withdrawed=!1,withdrawAmount.textContent=betAmount,removeBalance())},removeBalance=function(){var t=parseFloat(balanceAmount.textContent)-betAmount;balanceAmount.textContent=t.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent))},addMoneyToBalance=function(){var t,e,n,o;!0===didBet&&!0===crashGoingStatus&&(winAudio.play(),withdrawed=!(didBet=!1),betAmount*=multiplierAmount,e=parseFloat(balanceAmount.textContent)+betAmount,balanceAmount.textContent=e.toFixed(2),localStorage.setItem("Balance","".concat(balanceAmount.textContent)),(t=document.createElement("p")).setAttribute("class","win"),t.textContent=betAmount.toFixed(2),e=Math.floor(30*Math.random()+20),n=Math.floor(35*Math.random()+30),t.style.top="".concat(e,"%"),t.style.left="".concat(n,"%"),document.body.append(t),o=e,moveUp=setInterval(function(){o-=.5,t.style.top="".concat(o,"%")},100),setTimeout(function(){document.body.lastElementChild.remove(),clearInterval(moveUp)},2e3))},createRandomLastDrops=function(){for(var t=0;t<8;t++){var e=4*Math.random()+1,n=document.createElement("p");n.setAttribute("class","main-crash__lastdropitem"),n.textContent=e.toFixed(2)+"x",2<=e&&e<4?n.style.color="#00a941":4<=e&&e<8?n.style.color="yellow":8<=e?n.style.color="#0d8aff":e<1.2&&(n.style.color="#de4c41"),lastDropsBox.append(n)}};setTimeout(function(){startCrash()},15e3),startTimerOnEnter(),createRandomLastDrops(),betBtn.addEventListener("click",function(){betAmount=betInput.value,playerBet()}),withdrawBtn.addEventListener("click",function(){addMoneyToBalance()}),clearBtn.addEventListener("click",function(){betInput.value=0}),lastBtn.addEventListener("click",function(){0!==lastBetAmount&&(betInput.value=lastBetAmount)}),plusOneBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+1}),plusTenBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+10}),plusOneHundredBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+100}),plusOneThousandBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t+1e3}),halfBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=t/2}),timesTwoBtn.addEventListener("click",function(){var t=parseFloat(betInput.value);betInput.value=2*t}),maxBtn.addEventListener("click",function(){betInput.value=localStorage.getItem("Balance")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyYXNoLmpzIl0sIm5hbWVzIjpbIm11bHRpcGxpZXJBbW91bnQiLCJjcmFzaEdvaW5nU3RhdHVzIiwic2Vjb25kVGltZSIsInRpbWVyT25TdGFydCIsInRpbWVyT25TdGFydENoZWNrIiwidGltZXJOb3JtYWwiLCJiZXRBbW91bnQiLCJsYXN0QmV0QW1vdW50IiwibXVsdGlwbGllciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJldEJ0biIsIndpdGhkcmF3QnRuIiwiYmV0SW5wdXQiLCJ0aW1lciIsImNsZWFyQnRuIiwibGFzdEJ0biIsInBsdXNPbmVCdG4iLCJwbHVzVGVuQnRuIiwicGx1c09uZUh1bmRyZWRCdG4iLCJwbHVzT25lVGhvdXNhbmRCdG4iLCJoYWxmQnRuIiwidGltZXNUd29CdG4iLCJtYXhCdG4iLCJBdWRpbyIsIndpbkF1ZGlvIiwiYmV0QXVkaW8iLCJsYXN0RHJvcHNCb3giLCJ3aXRoZHJhd0Ftb3VudCIsInNwZWVkIiwiY3Jhc2hHb2luZyIsInRpbWVyTm9ybWFsQ2hlY2siLCJkaWRCZXQiLCJtb3ZlVXAiLCJzdGFydENyYXNoIiwiTWF0aCIsInJhbmRvbSIsImNyYXNoVGltZSIsImNyYXNoVGltZURpdmlkZSIsImZsb29yIiwic3R5bGUiLCJjb2xvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJjbGVhckludGVydmFsIiwid2l0aGRyYXdQbGF5ZXJBbW91bnQiLCJ0b0ZpeGVkIiwid2l0aGRyYXdlZCIsInRleHRDb250ZW50Iiwic3RvcENyYXNoIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJsYXN0RHJvcHNJdGVtIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInN0YXJ0VGltZXIiLCJhcHBlbmQiLCJzdGFydFRpbWVyT25FbnRlciIsImFkZCIsInNldEludGVydmFsIiwidmFsdWUiLCJyZW1vdmVCYWxhbmNlIiwicGFyc2VGbG9hdCIsImFtb3VudFZhbHVlIiwiYmFsYW5jZUFtb3VudCIsInNldEl0ZW0iLCJ3aW5Qb3BVcCIsInRvcCIsImNvbmNhdCIsInJhbmRvbUZyb21Ub3AiLCJib2R5IiwibG9jYWxTdG9yYWdlIiwibW92ZVVwVmFsdWUiLCJyYW5kb21WYWx1ZSIsImNyZWF0ZVJhbmRvbUxhc3REcm9wcyIsInJhbmRvbUZyb21MZWZ0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZE1vbmV5VG9CYWxhbmNlIiwiaSIsImdldEl0ZW0iXSwibWFwcGluZ3MiOiJhQUFBLElBa0JJQSxXQUdBQyxhQUNBQyxrQkFDQUMsWUFDQUMsaUJBQ0FDLFVBRUFDLGNBRUFDLE9BN0JFQyxXQUFhQyxTQUFTQyxjQUFjLDhCQUE4QixFQUNsRUMsT0FBU0YsU0FBU0MsY0FBYyxrQkFBa0IsRUFEbERGLFlBQWFDLFNBQVNDLGNBQWMsNEJBQStCLEVBQ25FQyxTQUFTRixTQUFTQyxjQUFjLG9CQUFtQixFQUNuREUsTUFBQUEsU0FBY0gsY0FBU0Msc0NBQTJDLEVBQ2xFRyxTQUFXSixTQUFTQyxjQUFjLFFBQUEsRUFDbENJLFFBQVFMLFNBQVNDLGNBQWMsT0FBQSxFQUMvQkssV0FBV04sU0FBU0MsY0FBYyxRQUFTLEVBQzNDTSxXQUFVUCxTQUFTQyxjQUFjLFNBQVEsRUFDekNPLGtCQUFzQlAsU0FBQUEsY0FBdUIsVUFBQSxFQUM3Q1EsbUJBQXNCUixTQUFBQSxjQUF3QixXQUFBLEVBQzlDUyxRQUFBQSxTQUFvQlYsY0FBU0MsT0FBYSxFQUMxQ1UsWUFBQUEsU0FBcUJYLGNBQVNDLEtBQWMsRUFDNUNXLE9BQVVaLFNBQVNDLGNBQWMsTUFBTyxFQUN4Q1ksU0FBVyxJQUFHYixNQUFTQyxzQkFBb0IsRUFDM0NhLFNBQVNkLElBQVFlLE1BQUNkLHNCQUFxQixFQUN2Q2UsYUFBZUQsU0FBTWQsY0FBQSx3QkFBdUIsRUFDNUNnQixlQUFlRixTQUFNZCxjQUFBLDZCQUF1QixFQUM1Q2lCLGlCQUFlbEIsRUFDZm1CLE1BQUFBLElBRUZDLGlCQUFXLENBQUEsRUFDWEMsV0FBVSxHQU1WQyxPQUFBQSxDQUFBQSxFQUVBQyxXQUFT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Q3JDL0MsU0FBUytDLE1BQVFBLEVBQVEsR0FDMUIsQ0FBQyxFQUVEeEMsbUJBQW1Cd0QsaUJBQWlCLFFBQVMsV0FDNUMsSUFBSWhCLEVBQVFFLFdBQVdqRCxTQUFTK0MsS0FBSyxFQUNyQy9DLFNBQVMrQyxNQUFRQSxFQUFRLEdBQzFCLENBQUMsRUFFRHZDLFFBQVF1RCxpQkFBaUIsUUFBUyxXQUNqQyxJQUFJaEIsRUFBUUUsV0FBV2pELFNBQVMrQyxLQUFLLEVBQ3JDL0MsU0FBUytDLE1BQVFBLEVBQVEsQ0FDMUIsQ0FBQyxFQUVEdEMsWUFBWXNELGlCQUFpQixRQUFTLFdBQ3JDLElBQUloQixFQUFRRSxXQUFXakQsU0FBUytDLEtBQUssRUFDckMvQyxTQUFTK0MsTUFBZ0IsRUFBUkEsQ0FDbEIsQ0FBQyxFQUVEckMsT0FBT3FELGlCQUFpQixRQUFTLFdBQ2hDL0QsU0FBUytDLE1BQVFXLGFBQWFRLFFBQVEsU0FBUyxDQUNoRCxDQUFDIiwiZmlsZSI6ImNyYXNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG11bHRpcGxpZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tY3Jhc2hfX211bHRpcGxpZXItdGV4dFwiKTtcclxuY29uc3QgYmV0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19iZXRcIik7XHJcbmNvbnN0IHdpdGhkcmF3QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19iZXQtLXdpdGhkcmF3XCIpO1xyXG5jb25zdCBiZXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jcmFzaF9faW5wdXRcIik7XHJcbmNvbnN0IHRpbWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19jb3VudGRvd24tdGltZXItc2Vjb25kc1wiKTtcclxuY29uc3QgY2xlYXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NsZWFyXCIpO1xyXG5jb25zdCBsYXN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsYXN0XCIpO1xyXG5jb25zdCBwbHVzT25lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbHVzMVwiKTtcclxuY29uc3QgcGx1c1RlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGx1czEwXCIpO1xyXG5jb25zdCBwbHVzT25lSHVuZHJlZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGx1czEwMFwiKTtcclxuY29uc3QgcGx1c09uZVRob3VzYW5kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbHVzMTAwMFwiKTtcclxuY29uc3QgaGFsZkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaGFsZlwiKTtcclxuY29uc3QgdGltZXNUd29CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3gyXCIpO1xyXG5jb25zdCBtYXhCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21heFwiKTtcclxuY29uc3Qgd2luQXVkaW8gPSBuZXcgQXVkaW8oXCIuL2Rpc3QvYXVkaW8vd2luLndhdlwiKTtcclxuY29uc3QgYmV0QXVkaW8gPSBuZXcgQXVkaW8oXCIuL2Rpc3QvYXVkaW8vYmV0LndhdlwiKTtcclxuY29uc3QgbGFzdERyb3BzQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX19sYXN0ZHJvcHNcIik7XHJcbmNvbnN0IHdpdGhkcmF3QW1vdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNyYXNoX193aXRoZHJhd2Ftb3VudFwiKTtcclxubGV0IG11bHRpcGxpZXJBbW91bnQgPSAxO1xyXG5sZXQgc3BlZWQgPSAxMDA7XHJcbmxldCBjcmFzaEdvaW5nO1xyXG5sZXQgY3Jhc2hHb2luZ1N0YXR1cyA9IGZhbHNlO1xyXG5sZXQgc2Vjb25kVGltZSA9IDE1O1xyXG5sZXQgdGltZXJPblN0YXJ0O1xyXG5sZXQgdGltZXJPblN0YXJ0Q2hlY2s7XHJcbmxldCB0aW1lck5vcm1hbDtcclxubGV0IHRpbWVyTm9ybWFsQ2hlY2s7XHJcbmxldCBiZXRBbW91bnQ7XHJcbmxldCBkaWRCZXQgPSBmYWxzZTtcclxubGV0IGxhc3RCZXRBbW91bnQ7XHJcbmxldCB3aXRoZHJhd2VkID0gZmFsc2U7XHJcbmxldCBtb3ZlVXA7XHJcblxyXG5jb25zdCBzdGFydENyYXNoID0gKCkgPT4ge1xyXG5cdGNvbnN0IGNyYXNoVGltZURpdmlkZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1ICsgNSk7XHJcblx0Y29uc3QgY3Jhc2hUaW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwMDAwKTtcclxuXHRjb25zdCBjcmFzaEFmdGVyID0gY3Jhc2hUaW1lIC8gY3Jhc2hUaW1lRGl2aWRlO1xyXG5cclxuXHRtdWx0aXBsaWVyLnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xyXG5cdGNyYXNoR29pbmdTdGF0dXMgPSB0cnVlO1xyXG5cdHRpbWVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjcmFzaC10aW1lLXRleHQtc3RhcnRcIik7XHJcblx0Ly8gY29uc29sZS5sb2coTWF0aC5mbG9vcihjcmFzaEFmdGVyKSk7XHJcblxyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aW1lck9uU3RhcnQpO1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aW1lck9uU3RhcnRDaGVjayk7XHJcblx0XHRjbGVhckludGVydmFsKHRpbWVyTm9ybWFsKTtcclxuXHRcdGNsZWFySW50ZXJ2YWwodGltZXJOb3JtYWxDaGVjayk7XHJcblx0fSwgMTAwKTtcclxuXHJcblx0Y3Jhc2hHb2luZyA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdGlmIChtdWx0aXBsaWVyQW1vdW50IDwgMikge1xyXG5cdFx0XHRtdWx0aXBsaWVyQW1vdW50ICs9IDAuMDE7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPiAyICYmIG11bHRpcGxpZXJBbW91bnQgPCAzKSB7XHJcblx0XHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wMjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+IDMgJiYgbXVsdGlwbGllckFtb3VudCA8IDQpIHtcclxuXHRcdFx0bXVsdGlwbGllckFtb3VudCArPSAwLjAzO1xyXG5cdFx0fSBlbHNlIGlmIChtdWx0aXBsaWVyQW1vdW50ID4gNCAmJiBtdWx0aXBsaWVyQW1vdW50IDwgNSkge1xyXG5cdFx0XHRtdWx0aXBsaWVyQW1vdW50ICs9IDAuMDQ7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPiA1ICYmIG11bHRpcGxpZXJBbW91bnQgPCA2KSB7XHJcblx0XHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wNTtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+IDYgJiYgbXVsdGlwbGllckFtb3VudCA8IDEwKSB7XHJcblx0XHRcdG11bHRpcGxpZXJBbW91bnQgKz0gMC4wNjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+IDEwICYmIG11bHRpcGxpZXJBbW91bnQgPCAyMCkge1xyXG5cdFx0XHRtdWx0aXBsaWVyQW1vdW50ICs9IDAuMDg7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPiAyMCAmJiBtdWx0aXBsaWVyQW1vdW50IDwgNTApIHtcclxuXHRcdFx0bXVsdGlwbGllckFtb3VudCArPSAwLjEyO1xyXG5cdFx0fSBlbHNlIGlmIChtdWx0aXBsaWVyQW1vdW50ID4gNTApIHtcclxuXHRcdFx0bXVsdGlwbGllckFtb3VudCArPSAwLjE4O1xyXG5cdFx0fVxyXG5cclxuXHRcdG11bHRpcGxpZXIudGV4dENvbnRlbnQgPSBtdWx0aXBsaWVyQW1vdW50LnRvRml4ZWQoMikgKyBcInhcIjtcclxuXHJcblx0XHRpZiAod2l0aGRyYXdlZCA9PT0gZmFsc2UgJiYgYmV0QW1vdW50ID4gMCAmJiBjcmFzaEdvaW5nU3RhdHVzID09PSB0cnVlKSB7XHJcblx0XHRcdGNvbnN0IHdpdGhkcmF3UGxheWVyQW1vdW50ID0gYmV0QW1vdW50ICogbXVsdGlwbGllckFtb3VudDtcclxuXHRcdFx0d2l0aGRyYXdBbW91bnQudGV4dENvbnRlbnQgPSB3aXRoZHJhd1BsYXllckFtb3VudC50b0ZpeGVkKDIpO1xyXG5cdFx0fSBlbHNlIGlmICh3aXRoZHJhd2VkID09PSB0cnVlKSB7XHJcblx0XHRcdHdpdGhkcmF3QW1vdW50LnRleHRDb250ZW50ID0gXCIwLjAwXCI7XHJcblx0XHR9XHJcblx0fSwgc3BlZWQpO1xyXG5cclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdHN0b3BDcmFzaCgpO1xyXG5cdH0sIE1hdGguZmxvb3IoY3Jhc2hBZnRlcikpO1xyXG59O1xyXG5cclxuY29uc3Qgc3RvcENyYXNoID0gKCkgPT4ge1xyXG5cdGlmIChsYXN0RHJvcHNCb3guY2hpbGRFbGVtZW50Q291bnQgPT09IDgpIHtcclxuXHRcdGxhc3REcm9wc0JveC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTtcclxuXHJcblx0XHRjb25zdCBsYXN0RHJvcHNJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0XHRsYXN0RHJvcHNJdGVtLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbi1jcmFzaF9fbGFzdGRyb3BpdGVtXCIpO1xyXG5cdFx0bGFzdERyb3BzSXRlbS50ZXh0Q29udGVudCA9IG11bHRpcGxpZXJBbW91bnQudG9GaXhlZCgyKSArIFwieFwiO1xyXG5cclxuXHRcdGlmIChtdWx0aXBsaWVyQW1vdW50ID49IDIgJiYgbXVsdGlwbGllckFtb3VudCA8IDQpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwiIzAwYTk0MVwiO1xyXG5cdFx0fSBlbHNlIGlmIChtdWx0aXBsaWVyQW1vdW50ID49IDQgJiYgbXVsdGlwbGllckFtb3VudCA8IDgpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwieWVsbG93XCI7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPj0gOCkge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjMGQ4YWZmXCI7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPCAxLjIpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwiI2RlNGM0MVwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxhc3REcm9wc0JveC5hcHBlbmQobGFzdERyb3BzSXRlbSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IGxhc3REcm9wc0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuXHRcdGxhc3REcm9wc0l0ZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtYWluLWNyYXNoX19sYXN0ZHJvcGl0ZW1cIik7XHJcblx0XHRsYXN0RHJvcHNJdGVtLnRleHRDb250ZW50ID0gbXVsdGlwbGllckFtb3VudC50b0ZpeGVkKDIpICsgXCJ4XCI7XHJcblxyXG5cdFx0aWYgKG11bHRpcGxpZXJBbW91bnQgPj0gMiAmJiBtdWx0aXBsaWVyQW1vdW50IDwgNCkge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjMDBhOTQxXCI7XHJcblx0XHR9IGVsc2UgaWYgKG11bHRpcGxpZXJBbW91bnQgPj0gNCAmJiBtdWx0aXBsaWVyQW1vdW50IDwgOCkge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCJ5ZWxsb3dcIjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA+PSA4KSB7XHJcblx0XHRcdGxhc3REcm9wc0l0ZW0uc3R5bGUuY29sb3IgPSBcIiMwZDhhZmZcIjtcclxuXHRcdH0gZWxzZSBpZiAobXVsdGlwbGllckFtb3VudCA8IDEuMikge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjZGU0YzQxXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0bGFzdERyb3BzQm94LmFwcGVuZChsYXN0RHJvcHNJdGVtKTtcclxuXHR9XHJcblxyXG5cdGNsZWFySW50ZXJ2YWwoY3Jhc2hHb2luZyk7XHJcblx0Y3Jhc2hHb2luZ1N0YXR1cyA9IGZhbHNlO1xyXG5cdG11bHRpcGxpZXJBbW91bnQgPSAxO1xyXG5cdHNlY29uZFRpbWUgPSAxNTtcclxuXHRkaWRCZXQgPSBmYWxzZTtcclxuXHRtdWx0aXBsaWVyLnN0eWxlLmNvbG9yID0gXCIjZGU0YzQxXCI7XHJcblx0YmV0QW1vdW50ID0gMDtcclxuXHR3aXRoZHJhd0Ftb3VudC50ZXh0Q29udGVudCA9IFwiMC4wMFwiO1xyXG5cdHN0YXJ0VGltZXIoKTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRzdGFydENyYXNoKCk7XHJcblx0fSwgMTUwMDApO1xyXG59O1xyXG5cclxuY29uc3Qgc3RhcnRUaW1lciA9ICgpID0+IHtcclxuXHR0aW1lci5jbGFzc0xpc3QuYWRkKFwiY3Jhc2gtdGltZS10ZXh0LXN0YXJ0XCIpO1xyXG5cclxuXHR0aW1lck5vcm1hbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdHNlY29uZFRpbWUtLTtcclxuXHRcdHRpbWVyLnRleHRDb250ZW50ID0gc2Vjb25kVGltZSArIFwic1wiO1xyXG5cdH0sIDEwMDApO1xyXG5cclxuXHR0aW1lck5vcm1hbENoZWNrID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0aWYgKHNlY29uZFRpbWUgPT09IDApIHtcclxuXHRcdFx0c2Vjb25kVGltZSA9IDE1O1xyXG5cdFx0XHR0aW1lci50ZXh0Q29udGVudCA9IHNlY29uZFRpbWUgKyBcInNcIjtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IHN0YXJ0VGltZXJPbkVudGVyID0gKCkgPT4ge1xyXG5cdHRpbWVyLmNsYXNzTGlzdC5hZGQoXCJjcmFzaC10aW1lLXRleHQtc3RhcnRcIik7XHJcblxyXG5cdHRpbWVyT25TdGFydCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdHNlY29uZFRpbWUtLTtcclxuXHRcdHRpbWVyLnRleHRDb250ZW50ID0gc2Vjb25kVGltZSArIFwic1wiO1xyXG5cdH0sIDEwMDApO1xyXG5cclxuXHR0aW1lck9uU3RhcnRDaGVjayA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdGlmIChzZWNvbmRUaW1lID09PSAwKSB7XHJcblx0XHRcdHNlY29uZFRpbWUgPSAxNTtcclxuXHRcdFx0dGltZXIudGV4dENvbnRlbnQgPSBzZWNvbmRUaW1lICsgXCJzXCI7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBwbGF5ZXJCZXQgPSAoKSA9PiB7XHJcblx0aWYgKGJldElucHV0LnZhbHVlID4gMCAmJiBjcmFzaEdvaW5nU3RhdHVzID09PSBmYWxzZSAmJiBkaWRCZXQgPT09IGZhbHNlKSB7XHJcblx0XHRkaWRCZXQgPSB0cnVlO1xyXG5cdFx0bGFzdEJldEFtb3VudCA9IGJldEFtb3VudDtcclxuXHRcdGJldElucHV0LnZhbHVlID0gMDtcclxuXHRcdGJldEF1ZGlvLnBsYXkoKTtcclxuXHRcdHdpdGhkcmF3ZWQgPSBmYWxzZTtcclxuXHRcdHdpdGhkcmF3QW1vdW50LnRleHRDb250ZW50ID0gYmV0QW1vdW50O1xyXG5cdFx0cmVtb3ZlQmFsYW5jZSgpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZUJhbGFuY2UgPSAoKSA9PiB7XHJcblx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSAtIGJldEFtb3VudDtcclxuXHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxufTtcclxuXHJcbmNvbnN0IGFkZE1vbmV5VG9CYWxhbmNlID0gKCkgPT4ge1xyXG5cdGlmIChkaWRCZXQgPT09IHRydWUgJiYgY3Jhc2hHb2luZ1N0YXR1cyA9PT0gdHJ1ZSkge1xyXG5cdFx0d2luQXVkaW8ucGxheSgpO1xyXG5cdFx0ZGlkQmV0ID0gZmFsc2U7XHJcblx0XHR3aXRoZHJhd2VkID0gdHJ1ZTtcclxuXHRcdGJldEFtb3VudCAqPSBtdWx0aXBsaWVyQW1vdW50O1xyXG5cdFx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRcdGxldCB2YWx1ZSA9IGFtb3VudFZhbHVlICsgYmV0QW1vdW50O1xyXG5cdFx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IHZhbHVlLnRvRml4ZWQoMik7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxuXHJcblx0XHRjb25zdCB3aW5Qb3BVcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cdFx0d2luUG9wVXAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ3aW5cIik7XHJcblx0XHR3aW5Qb3BVcC50ZXh0Q29udGVudCA9IGJldEFtb3VudC50b0ZpeGVkKDIpO1xyXG5cdFx0Y29uc3QgcmFuZG9tRnJvbVRvcCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwICsgMjApO1xyXG5cdFx0Y29uc3QgcmFuZG9tRnJvbUxlZnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzNSArIDMwKTtcclxuXHJcblx0XHR3aW5Qb3BVcC5zdHlsZS50b3AgPSBgJHtyYW5kb21Gcm9tVG9wfSVgO1xyXG5cdFx0d2luUG9wVXAuc3R5bGUubGVmdCA9IGAke3JhbmRvbUZyb21MZWZ0fSVgO1xyXG5cclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kKHdpblBvcFVwKTtcclxuXHJcblx0XHRsZXQgbW92ZVVwVmFsdWUgPSByYW5kb21Gcm9tVG9wO1xyXG5cclxuXHRcdG1vdmVVcCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0bW92ZVVwVmFsdWUgLT0gMC41O1xyXG5cdFx0XHR3aW5Qb3BVcC5zdHlsZS50b3AgPSBgJHttb3ZlVXBWYWx1ZX0lYDtcclxuXHRcdH0sIDEwMCk7XHJcblxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkubGFzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTtcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbChtb3ZlVXApO1xyXG5cdFx0fSwgMjAwMCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlUmFuZG9tTGFzdERyb3BzID0gKCkgPT4ge1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XHJcblx0XHRjb25zdCByYW5kb21WYWx1ZSA9IE1hdGgucmFuZG9tKCkgKiA0ICsgMTtcclxuXHRcdGNvbnN0IGxhc3REcm9wc0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuXHRcdGxhc3REcm9wc0l0ZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtYWluLWNyYXNoX19sYXN0ZHJvcGl0ZW1cIik7XHJcblx0XHRsYXN0RHJvcHNJdGVtLnRleHRDb250ZW50ID0gcmFuZG9tVmFsdWUudG9GaXhlZCgyKSArIFwieFwiO1xyXG5cclxuXHRcdGlmIChyYW5kb21WYWx1ZSA+PSAyICYmIHJhbmRvbVZhbHVlIDwgNCkge1xyXG5cdFx0XHRsYXN0RHJvcHNJdGVtLnN0eWxlLmNvbG9yID0gXCIjMDBhOTQxXCI7XHJcblx0XHR9IGVsc2UgaWYgKHJhbmRvbVZhbHVlID49IDQgJiYgcmFuZG9tVmFsdWUgPCA4KSB7XHJcblx0XHRcdGxhc3REcm9wc0l0ZW0uc3R5bGUuY29sb3IgPSBcInllbGxvd1wiO1xyXG5cdFx0fSBlbHNlIGlmIChyYW5kb21WYWx1ZSA+PSA4KSB7XHJcblx0XHRcdGxhc3REcm9wc0l0ZW0uc3R5bGUuY29sb3IgPSBcIiMwZDhhZmZcIjtcclxuXHRcdH0gZWxzZSBpZiAocmFuZG9tVmFsdWUgPCAxLjIpIHtcclxuXHRcdFx0bGFzdERyb3BzSXRlbS5zdHlsZS5jb2xvciA9IFwiI2RlNGM0MVwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxhc3REcm9wc0JveC5hcHBlbmQobGFzdERyb3BzSXRlbSk7XHJcblx0fVxyXG59O1xyXG5cclxuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0c3RhcnRDcmFzaCgpO1xyXG59LCAxNTAwMCk7XHJcblxyXG5zdGFydFRpbWVyT25FbnRlcigpO1xyXG5jcmVhdGVSYW5kb21MYXN0RHJvcHMoKTtcclxuXHJcbmJldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGJldEFtb3VudCA9IGJldElucHV0LnZhbHVlO1xyXG5cdHBsYXllckJldCgpO1xyXG59KTtcclxuXHJcbndpdGhkcmF3QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0YWRkTW9uZXlUb0JhbGFuY2UoKTtcclxufSk7XHJcblxyXG5jbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGJldElucHV0LnZhbHVlID0gMDtcclxufSk7XHJcblxyXG5sYXN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0aWYgKGxhc3RCZXRBbW91bnQgIT09IDApIHtcclxuXHRcdGJldElucHV0LnZhbHVlID0gbGFzdEJldEFtb3VudDtcclxuXHR9XHJcbn0pO1xyXG5cclxucGx1c09uZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQoYmV0SW5wdXQudmFsdWUpO1xyXG5cdGJldElucHV0LnZhbHVlID0gdmFsdWUgKyAxO1xyXG59KTtcclxuXHJcbnBsdXNUZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRsZXQgdmFsdWUgPSBwYXJzZUZsb2F0KGJldElucHV0LnZhbHVlKTtcclxuXHRiZXRJbnB1dC52YWx1ZSA9IHZhbHVlICsgMTA7XHJcbn0pO1xyXG5cclxucGx1c09uZUh1bmRyZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRsZXQgdmFsdWUgPSBwYXJzZUZsb2F0KGJldElucHV0LnZhbHVlKTtcclxuXHRiZXRJbnB1dC52YWx1ZSA9IHZhbHVlICsgMTAwO1xyXG59KTtcclxuXHJcbnBsdXNPbmVUaG91c2FuZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQoYmV0SW5wdXQudmFsdWUpO1xyXG5cdGJldElucHV0LnZhbHVlID0gdmFsdWUgKyAxMDAwO1xyXG59KTtcclxuXHJcbmhhbGZCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRsZXQgdmFsdWUgPSBwYXJzZUZsb2F0KGJldElucHV0LnZhbHVlKTtcclxuXHRiZXRJbnB1dC52YWx1ZSA9IHZhbHVlIC8gMjtcclxufSk7XHJcblxyXG50aW1lc1R3b0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGxldCB2YWx1ZSA9IHBhcnNlRmxvYXQoYmV0SW5wdXQudmFsdWUpO1xyXG5cdGJldElucHV0LnZhbHVlID0gdmFsdWUgKiAyO1xyXG59KTtcclxuXHJcbm1heEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGJldElucHV0LnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJCYWxhbmNlXCIpO1xyXG59KTtcclxuIl19
