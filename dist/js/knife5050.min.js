"use strict";var currentWinningItemPrice,openBtn=document.querySelector(".open-btn"),caseBox=document.querySelector(".case"),winningItemBox=document.querySelector(".winning-item"),winningImg=document.querySelector(".winning-item img"),winningButton=document.querySelector(".winning-item-button"),spinningBtn=document.querySelector(".open-btn--spinning"),balanceAmountMobile=document.querySelector(".nav__balance-amount"),lastItemDrops=document.querySelector(".main__dropsbox"),openAudio=new Audio("./dist/audio/open.mp3"),itemsAnubisPrice=[[1521.09],[98.28]],itemsAnubisImg=[["./dist/img/knife5050/doppler.png"],["./dist/img/knife5050/navaja.png"]],itemsAnubisName=[["Karambit | Doppler"],["Navaja | Safari Mesh"]],gold="linear-gradient(180deg, black 40%, rgba(255,248,0, .5) 100%",red="linear-gradient(180deg, black 40%, rgba(222, 76, 65, .5) 100%)",pink="linear-gradient(180deg, black 40%, rgba(255, 50, 240, .5) 100%)",purple="linear-gradient(180deg, black 40%, rgba(125, 50, 255, .5) 100%)",lightBlue="linear-gradient(180deg, black 40%, rgba(160, 211, 255, .5) 100%)",blue="linear-gradient(180deg, black 40%, rgba(50, 113, 255, .5) 100%)",grey="linear-gradient(180deg, black 40%, rgba(78, 78, 78, .5) 100%)",opened=!1,balanceAmount=document.querySelector(".nav__list-item-balance-amount"),addBalance=(balanceAmount.textContent=localStorage.getItem("Balance"),function(){var e=parseFloat(balanceAmount.textContent)+currentWinningItemPrice;balanceAmount.textContent=e.toFixed(2),balanceAmountMobile.textContent=e.toFixed(2)}),removeBalanceOnOpen=function(){var e=parseFloat(balanceAmount.textContent)-800;balanceAmount.textContent=e.toFixed(2),balanceAmountMobile.textContent=e.toFixed(2)},startOpeningAnimation=function(){caseBox.classList.add("open-anim"),addItems(),opened=!0,setTimeout(function(){opened=!1,resetOpening()},6500)},setWinningItem=function(){var e=Math.floor(100*Math.random()),t=document.createElement("div"),n=document.createElement("li"),i=document.createElement("img"),a=document.createElement("p"),s=(s=e)<=50?0:1,m=(n.style.background=e<=50?gold:grey,Math.floor(Math.random()*itemsAnubisImg[s].length));n.setAttribute("class","case-item"),i.setAttribute("class","case-item-img"),i.setAttribute("src",itemsAnubisImg[s][m]),i.setAttribute("alt",itemsAnubisName[s][m]),a.setAttribute("class","case-item-name"),a.textContent=itemsAnubisName[s][m],n.append(i,a),t.append(n),caseBox.append(t),currentWinningItemPrice=itemsAnubisPrice[s][m],removeBalanceOnOpen(),openBtn.classList.add("hidden"),spinningBtn.classList.remove("hidden"),setTimeout(function(){addBalance(),localStorage.setItem("Balance","".concat(balanceAmount.textContent)),id++;var e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("div"),i=document.createElement("p"),a=document.createElement("p"),o=document.createElement("img");e.setAttribute("class","main__dropsbox-item main__dropsbox-item--gold"),e.setAttribute("id",id),t.setAttribute("class","main__dropsbox-item-img"),t.setAttribute("src","".concat(itemsAnubisImg[s][m])),t.setAttribute("alt","".concat(itemsAnubisImg[s][m])),a.setAttribute("class","main__dropsbox-item-name"),i.setAttribute("class","main__dropsbox-item-price"),o.setAttribute("class","main__dropsbox-item-pricebox-img"),o.setAttribute("src","./dist/img/other/coin.png"),o.setAttribute("alt","Coin Icon"),n.setAttribute("class","main__dropsbox-item-pricebox hidden"),i.textContent=itemsAnubisPrice[s][m],e.style.order="-"+id,a.textContent=itemsAnubisName[s][m],n.append(i,o),e.append(t,a,n),lastItemDrops.append(e),10<lastItemDrops.childElementCount&&lastItemDrops.firstElementChild.remove(),id%2==0?e.style.background="linear-gradient(90deg, #1d2126 25%, rgba(255, 255, 1, 0.1) 100%":e.style.background="linear-gradient(90deg, #282e35 25%, rgba(255, 255, 1, 0.1) 100%",e.addEventListener("mouseover",function(){n.classList.remove("hidden")}),e.addEventListener("mouseleave",function(){n.classList.add("hidden")})},5500),setTimeout(function(){t.remove(),openBtn.classList.remove("hidden"),spinningBtn.classList.add("hidden")},6500)},addItems=function(){for(var e=0;e<=10;e++)!function(){var e=Math.floor(100*Math.random()),t=document.createElement("div"),n=document.createElement("li"),i=document.createElement("img"),a=document.createElement("p"),o=(o=e)<=50?0:1,s=Math.floor(Math.random()*itemsAnubisImg[o].length);n.style.background=e<=50?gold:grey,n.setAttribute("class","case-item"),i.setAttribute("class","case-item-img"),i.setAttribute("src",itemsAnubisImg[o][s]),i.setAttribute("alt",itemsAnubisName[o][s]),a.setAttribute("class","case-item-name"),a.textContent=itemsAnubisName[o][s],n.append(i,a),t.append(n),caseBox.append(t),setTimeout(function(){t.remove()},6500)}();setWinningItem();for(var t=0;t<=4;t++)!function(){var e=Math.floor(100*Math.random()),t=document.createElement("div"),n=document.createElement("li"),i=document.createElement("img"),a=document.createElement("p"),o=(o=e)<=50?0:1,s=Math.floor(Math.random()*itemsAnubisImg[o].length);n.style.background=e<=50?gold:grey,n.setAttribute("class","case-item"),i.setAttribute("class","case-item-img"),i.setAttribute("src",itemsAnubisImg[o][s]),i.setAttribute("alt",itemsAnubisName[o][s]),a.setAttribute("class","case-item-name"),a.textContent=itemsAnubisName[o][s],n.append(i,a),t.append(n),caseBox.append(t),setTimeout(function(){t.remove()},6500)}()},resetOpening=function(){caseBox.classList.remove("open-anim")};openBtn.addEventListener("click",function(){!1===opened&&800<=parseFloat(balanceAmount.textContent)&&(startOpeningAnimation(),openAudio.play())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtuaWZlNTA1MC5qcyJdLCJuYW1lcyI6WyJhZGRCYWxhbmNlIiwib3BlbkJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNhc2VCb3giLCJ3aW5uaW5nSXRlbUJveCIsIndpbm5pbmdJbWciLCJ3aW5uaW5nQnV0dG9uIiwic3Bpbm5pbmdCdG4iLCJiYWxhbmNlQW1vdW50TW9iaWxlIiwibGFzdEl0ZW1Ecm9wcyIsIm9wZW5BdWRpbyIsIkF1ZGlvIiwiZ29sZCIsInJlZCIsInBpbmsiLCJwdXJwbGUiLCJsaWdodEJsdWUiLCJncmV5IiwiY3VycmVudFdpbm5pbmdJdGVtUHJpY2UiLCJiYWxhbmNlQW1vdW50IiwiYW1vdW50VmFsdWUiLCJwYXJzZUZsb2F0IiwidGV4dENvbnRlbnQiLCJsb2NhbFN0b3JhZ2UiLCJ0b0ZpeGVkIiwidmFsdWUiLCJyZW1vdmVCYWxhbmNlT25PcGVuIiwib3BlbmVkIiwic2V0V2lubmluZ0l0ZW0iLCJ3aW5uaW5nSXRlbU51bWJlciIsImZsb29yIiwiYWRkSXRlbXMiLCJ3aW5uaW5nSXRlbURpdiIsIndpbm5pbmdJdGVtIiwic2V0VGltZW91dCIsIndpbm5pbmdJdGVtVGV4dCIsImNoYW5jZXMiLCJyZXNldE9wZW5pbmciLCJNYXRoIiwicmFuZG9tIiwiYmFja2dyb3VuZCIsImNyZWF0ZUVsZW1lbnQiLCJ3aW5uaW5nSXRlbUltZyIsInJhbmRvbUl0ZW1Gcm9tQ29sb3IiLCJhcHBlbmQiLCJpdGVtc0FudWJpc0ltZyIsImxlbmd0aCIsInNldEF0dHJpYnV0ZSIsIml0ZW1QcmljZUJveCIsIml0ZW1zQW51YmlzTmFtZSIsImNvbmNhdCIsIml0ZW1QcmljZUljb24iLCJpdGVtc0FudWJpc1ByaWNlIiwiaXRlbUltZyIsIml0ZW1UZXh0Iiwic2V0SXRlbSIsImlkIiwiaXRlbSIsInN0eWxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsIl9sb29wIiwibm9ybWFsSXRlbU51bWJlciIsIm5vcm1hbEl0ZW1JbWciLCJpdGVtUHJpY2UiLCJub3JtYWxJdGVtVGV4dCIsIm9yZGVyIiwibm9ybWFsSXRlbSIsImNoaWxkRWxlbWVudENvdW50Iiwibm9ybWFsSXRlbURpdiIsImFkZCIsImkiLCJzdGFydE9wZW5pbmdBbmltYXRpb24iLCJfbG9vcDIiLCJwbGF5Il0sIm1hcHBpbmdzIjoiYUFBQSxJQThCTUEsd0JBOUJBQyxRQUFVQyxTQUFTQyxjQUFjLFdBQVcsRUFDNUNDLFFBQVVGLFNBQVNDLGNBQWMsT0FBTyxFQUR4Q0YsZUFBbUJFLFNBQUFBLGNBQWMsZUFBWSxFQUM3Q0MsV0FBVUYsU0FBU0MsY0FBYyxtQkFBUSxFQUN6Q0UsY0FBaUJILFNBQVNDLGNBQWMsc0JBQWdCLEVBQ3hERyxZQUFhSixTQUFTQyxjQUFjLHFCQUFvQixFQUN4REksb0JBQXdCTCxTQUFDQyxjQUFjLHNCQUF1QixFQUM5REssY0FBY04sU0FBU0MsY0FBYyxpQkFBcUIsRUFDMURNLFVBQUFBLElBQUFBLE1BQXNCUCx1QkFBdUIsRUFDN0NRLGlCQUFnQlIsQ0FBQUEsQ0FBQUEsU0FBU0MsQ0FBQUEsUUFDekJRLGVBQWdCQyxDQUN0QixDQUFBLG9DQUNBLENBQUEsb0NBS01DLGdCQUFPLENBQUEsQ0FBQSxzQkFBQSxDQUFBLHlCQUNQQyxLQUFNLDhEQUNOQyxJQUFPLGlFQUNQQyxLQUNMLGtFQUNLQyxPQUVOLGtFQUNNQyxVQUNOLG1FQUNJQyxLQUFBQSxrRUFDRUMsS0FBQUEsZ0VBRU5BLE9BQWEsQ0FBQSxFQUdSQyxjQUFjQyxTQUFXRixjQUFjRyxnQ0FBWSxFQUt2RHZCLFlBUkRvQixjQU1DQSxZQUF5QkksYUFBU0MsUUFBVSxTQUFBLEVBRTVDLFdBRUQsSUFDQ0MsRUFES0MsV0FBc0JQLGNBQXRCTyxXQUFtQixFQUNOTCx3QkFMbEJGLGNBUWFHLFlBQVlHLEVBQVFELFFBQVEsQ0FBQyxFQVAxQ2hCLG9CQVFtQmMsWUFBWUcsRUFBUUQsUUFBUSxDQUFDLENBQ2pELEdBR0NyQixvQkFBc0IsV0FSdEIsSUFVQXdCLEVBRFVOLFdBQUFGLGNBQUFHLFdBQUEsRUFDRyxJQVBiSCxjQVVVRyxZQUFLRyxFQUFBRCxRQUFBLENBQUEsRUFUZmhCLG9CQVVlYyxZQUFBRyxFQUFBRCxRQUFBLENBQUEsQ0FUaEIsRUFhTUksc0JBQUFBLFdBVkx6QixRQVdNMEIsVUFBQUEsSUFBaUIsV0FBUUMsRUFWL0JDLFNBV01DLEVBVk5MLE9BV01NLENBQUFBLEVBVE5DLFdBV01DLFdBQ05SLE9BQUlTLENBQUFBLEVBRUpDLGFBQVcsQ0FYWCxFQVlDRCxJQUFBQSxDQVhGLEVBY0NSLGVBQUEsV0FYQSxJQWFJQyxFQUFxQlMsS0FBSVIsTUFBQSxJQUFBUSxLQUFBQyxPQUFBLENBQUEsRUFDNUJOLEVBQWtCTyxTQUFVQyxjQUFPLEtBQUEsRUFDbkNSLEVBQU1oQyxTQUFBd0MsY0FBQSxJQUFBLEVBQ05SLEVBQWtCTyxTQUFVQyxjQUFPLEtBQUEsRUFDcENOLEVBQUFsQyxTQUFBd0MsY0FBQSxHQUFBLEVBUUFDLEdBREFBLEVBTE1DLElBS1EsR0FDZEQsRUFRQVAsRUFjQUQsR0FUQS9CLEVBQVF5QyxNQUFPWixXQURmQSxHQUFzQkMsR0FDUXJCLEtBSVRLLEtBS0pxQixLQUFBUixNQTNCaEJRLEtBNEJBdkMsT0FBVSxFQUFFOEMsZUFBQVQsR0FBQVUsTUEzQmIsR0FFQWIsRUE2QldjLGFBQVlOLFFBQUFBLFdBQW9CLEVBNUIzQ0MsRUE2QmNLLGFBQVlOLFFBQUFBLGVBQW9CLEVBNUI5Q0MsRUE2Qk9NLGFBNUJOLE1BQ0FILGVBNkJjVCxHQUFHbkMsRUE1QmxCLEVBQ0F5QyxFQTZCTUssYUE1QkwsTUFDQUUsZ0JBZ0NRRixHQUFhSixFQS9CdEIsRUFDQVIsRUFtQ1NZLGFBQ0YsUUFBQUcsZ0JBQ0ZMLEVBcENMVixFQXNDVVksWUFBYUUsZ0JBQVNiLEdBQUFPLEdBcENoQ1YsRUFzQ0NrQixPQUFjSixFQUFhWixDQUFTLEVBckNyQ0gsRUFzQ0NtQixPQUFjSixDQUFhLEVBckM1QjVDLFFBc0NDZ0QsT0FBQUEsQ0FBMEIsRUFwQzNCakMsd0JBc0NzQmtDLGlCQUFtQmhCLEdBQVNPLEdBcENsRGpCLG9CQXNDVUosRUFwQ1Z0QixRQXNDTTRDLFVBQU9TLElBQU8sUUFBRUMsRUFyQ3RCL0MsWUFzQ0NFLFVBQWNtQyxPQUFZLFFBQUEsRUFwQzNCVixXQXVDRXpCLFdBdENEVixXQXVDQSxFQXRDQXdCLGFBd0NVZ0MsUUFBUSxVQUFBLEdBQUFMLE9BQUEvQixjQUFBRyxXQUFBLENBQUEsRUF0Q2xCa0MsRUF3Q0EsR0F2Q0EsSUF3Q0NDLEVBQUtDLFNBQU1sQixjQUFVLEtBQUEsRUFDdEJhLEVBQUFwRCxTQUFBd0MsY0FBQSxLQUFBLEVBRUlPLEVBQUNXLFNBQWlCbEIsY0FBYSxLQUFNLEVBQ3hDTyxFQUFhWSxTQUFVQyxjQUFPLEdBQVMsRUFDdENQLEVBQUFyRCxTQUFBd0MsY0FBQSxHQUFBLEVBRUVVLEVBQUNRLFNBQWlCbEIsY0FBYyxLQUFNLEVBekMxQ2dCLEVBMENDVCxhQXpDQSxRQTJDRCwrQ0FFRGQsRUExQ0N1QixFQTJDQXpCLGFBQWU2QixLQUFPTCxFQUFDLEVBMUN2QkgsRUEyQ0FyRCxhQUFrQjZELFFBQU8seUJBQVMsRUExQ2xDUixFQTJDQTlDLGFBQ0EsTUFBRSxHQUFBMkMsT0FDSEwsZUFBQVQsR0FBQU8sRUFBQSxDQUVELEVBQXVCVSxFQUFBUyxhQTFDcEIsTUE0Q0tDLEdBQUFBLE9BQ05sQixlQUFtQlQsR0FBR25DLEVBQXVCLENBM0M3QyxFQUNBcUQsRUE0Q01VLGFBQWdCL0QsUUFBU3dDLDBCQUFvQixFQTNDbkR3QixFQTRDTUMsYUFBaUJqRSxRQUFTd0MsMkJBQWtCLEVBM0NsRFUsRUE2Q1dKLGFBQUdnQixRQUFnQixrQ0FBQSxFQTVDOUJaLEVBOENXSixhQUFRLE1BQUEsMkJBQUEsRUE3Q25CSSxFQThDV0osYUFBQyxNQUFBLFdBQUEsRUE3Q1pDLEVBOENPRCxhQUFBLFFBQUEscUNBQUEsRUE3Q1BrQixFQThDQzdCLFlBQVdnQixpQkFBQWhCLEdBQUFPLEdBN0NaYyxFQThDQUMsTUFBQVMsTUFBQSxJQUFBWCxHQTdDQUYsRUErQ01YLFlBQUFBLGdCQUNMTCxHQUFLQyxHQS9DTlMsRUFrREllLE9BQUFBLEVBQXdCWixDQUFBLEVBakQ1Qk0sRUFrRENXLE9BQUFBLEVBQWlCNUIsRUFBVVEsQ0FBTyxFQWpEbkN2QyxjQWtET21DLE9BQUFhLENBQUEsRUFFUCxHQUFBaEQsY0FBQTRELG1CQWpEQzVELGNBbURVc0Msa0JBQW9CYyxPQUFFLEVBTWpDRyxHQUFBQSxHQUFhLEVBckRaUCxFQXlERFMsTUFBQUEsV0FBZW5CLGtFQXZEZFUsRUEwRERXLE1BQVU1QixXQUFRd0Isa0VBdkRsQlAsRUEyREF2QixpQkFBVyxZQUFNLFdBMURoQmMsRUEyREFzQixVQUFvQlQsT0FBRSxRQUFBLENBMUR2QixDQUFDLEVBZUZKLEVBQUtFLGlCQUFnQixhQUFPLFdBWjFCWCxFQVkwQlksVUFBQVcsSUFBQSxRQUFBLENBQUEsQ0FBQSxDQVY1QixFQXlEQTNDLElBQUFBLEVBdkRBTSxXQTBETzZCLFdBekROL0IsRUEwRE1zQyxPQUFnQnJFLEVBekR0QkQsUUEwRE1vRSxVQUFVUCxPQUFHNUQsUUFBU3dDLEVBekQ1QmxDLFlBMERNeUQsVUFBZ0IvRCxJQUFBQSxRQUFTd0MsQ0F6RGhDLEVBMERDLElBQU15QixDQXpEUixFQThERzlCLFNBQVcsV0EzRGIsSUEyRGEsSUFDWG9DLEVBQU0sRUFBQUEsR0FBQSxHQUFBQSxDQUFBLEdBQUFWLENBREssV0ExRFosSUE0REMxQixFQUFXRSxLQUFBUixNQUFBLElBQUFRLEtBQUFDLE9BQUEsQ0FBQSxFQUNaK0IsRUFBQXJFLFNBQUF3QyxjQUFBLEtBQUEsRUFFTUUsRUFBQUEsU0FBc0JMLGNBQzNCQSxJQUFLQyxFQUdGd0IsRUFBZ0I5RCxTQUFRd0MsY0FBQSxLQUFBLEVBQzNCMkIsRUFBaUI1QixTQUFVQyxjQUFPLEdBQUEsRUEzRGxDTCxHQWdFRGdDLEVBSFdMLElBR0FoQixHQUNYaUIsRUFLQUEsRUFPQUksRUFBa0JKLEtBQWFsQyxNQXZFOUJRLEtBd0VEZ0MsT0FBQUEsRUFBYzFCLGVBQU93QixHQUFXdEIsTUF2RWhDLEVBR0NzQixFQXlFT1YsTUFBQWxCLFdBRFA4QixHQUFvQixHQUNiMUQsS0E1Q2tCSyxLQThDM0JtRCxFQUFBckIsYUFBQSxRQUFBLFdBQUEsRUFFRGlCLEVBQWtCakIsYUFBWlYsUUFBQUEsZUFBcUIsRUFDMUJsQyxFQUFReUQsYUFDUixNQUVENUQsZUFBUTJELEdBQWlCaEIsRUFDeEIsRUF2RUNxQixFQXdFQVMsYUF2RUMsTUF5RUZ4QixnQkFBQWIsR0FBQU8sRUFDQyxFQXZFQXVCLEVBQWVuQixhQUFhLFFBQVMsZ0JBQWdCLEVBQ3JEbUIsRUFBZTVDLFlBQWMyQixnQkFBZ0JiLEdBQVNPLEdBRXREeUIsRUFBV3hCLE9BQU9vQixFQUFlRSxDQUFjLEVBQy9DSSxFQUFjMUIsT0FBT3dCLENBQVUsRUFDL0JqRSxRQUFReUMsT0FBTzBCLENBQWEsRUFFNUJwQyxXQUFXLFdBQ1ZvQyxFQUFjVCxPQUFPLENBQ3RCLEVBQUcsSUFBSSxDQUNSLEVBZVEsRUFiUmpDLGVBQWUsRUFFZixJQUZpQixJQUVSNEMsRUFBSSxFQUFHQSxHQUFLLEVBQUdBLENBQUMsR0FBRUUsQ0FGVixXQUdoQixJQUFNWCxFQUFtQnpCLEtBQUtSLE1BQXNCLElBQWhCUSxLQUFLQyxPQUFPLENBQU8sRUFDakQrQixFQUFnQnJFLFNBQVN3QyxjQUFjLEtBQUssRUFDNUMyQixFQUFhbkUsU0FBU3dDLGNBQWMsSUFBSSxFQUN4Q3VCLEVBQWdCL0QsU0FBU3dDLGNBQWMsS0FBSyxFQUM1Q3lCLEVBQWlCakUsU0FBU3dDLGNBQWMsR0FBRyxFQUtoREwsR0FER0EsRUFGVTJCLElBRUMsR0FDSixFQUVBLEVBR0xwQixFQUFzQkwsS0FBS1IsTUFDaENRLEtBQUtDLE9BQU8sRUFBSU0sZUFBZVQsR0FBU1UsTUFDekMsRUFHQ3NCLEVBQVdWLE1BQU1sQixXQURkdUIsR0FBb0IsR0FDT25ELEtBRUFLLEtBRy9CbUQsRUFBV3JCLGFBQWEsUUFBUyxXQUFXLEVBQzVDaUIsRUFBY2pCLGFBQWEsUUFBUyxlQUFlLEVBQ25EaUIsRUFBY2pCLGFBQ2IsTUFDQUYsZUFBZVQsR0FBU08sRUFDekIsRUFDQXFCLEVBQWNqQixhQUNiLE1BQ0FFLGdCQUFnQmIsR0FBU08sRUFDMUIsRUFDQXVCLEVBQWVuQixhQUFhLFFBQVMsZ0JBQWdCLEVBQ3JEbUIsRUFBZTVDLFlBQWMyQixnQkFBZ0JiLEdBQVNPLEdBRXREeUIsRUFBV3hCLE9BQU9vQixFQUFlRSxDQUFjLEVBQy9DSSxFQUFjMUIsT0FBT3dCLENBQVUsRUFDL0JqRSxRQUFReUMsT0FBTzBCLENBQWEsRUFFNUJwQyxXQUFXLFdBQ1ZvQyxFQUFjVCxPQUFPLENBQ3RCLEVBQUcsSUFBSSxDQUNSLEVBN0MyQixDQThDNUIsRUFFTXhCLGFBQWUsV0FDcEJsQyxRQUFReUQsVUFBVUMsT0FBTyxXQUFXLENBQ3JDLEVBRUE3RCxRQUFRMkQsaUJBQWlCLFFBQVMsV0FDbEIsQ0FBQSxJQUFYaEMsUUFBNkQsS0FBekNOLFdBQVdGLGNBQWNHLFdBQVcsSUFDM0RtRCxzQkFBc0IsRUFDdEIvRCxVQUFVaUUsS0FBSyxFQUVqQixDQUFDIiwiZmlsZSI6ImtuaWZlNTA1MC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBvcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vcGVuLWJ0blwiKTtcclxuY29uc3QgY2FzZUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FzZVwiKTtcclxuY29uc3Qgd2lubmluZ0l0ZW1Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbm5pbmctaXRlbVwiKTtcclxuY29uc3Qgd2lubmluZ0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2lubmluZy1pdGVtIGltZ1wiKTtcclxuY29uc3Qgd2lubmluZ0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2lubmluZy1pdGVtLWJ1dHRvblwiKTtcclxuY29uc3Qgc3Bpbm5pbmdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wZW4tYnRuLS1zcGlubmluZ1wiKTtcclxuY29uc3QgYmFsYW5jZUFtb3VudE1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19iYWxhbmNlLWFtb3VudFwiKTtcclxuY29uc3QgbGFzdEl0ZW1Ecm9wcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbl9fZHJvcHNib3hcIik7XHJcbmNvbnN0IG9wZW5BdWRpbyA9IG5ldyBBdWRpbyhcIi4vZGlzdC9hdWRpby9vcGVuLm1wM1wiKTtcclxuY29uc3QgaXRlbXNBbnViaXNQcmljZSA9IFtbMTUyMS4wOV0sIFs5OC4yOF1dO1xyXG5jb25zdCBpdGVtc0FudWJpc0ltZyA9IFtcclxuXHRbXCIuL2Rpc3QvaW1nL2tuaWZlNTA1MC9kb3BwbGVyLnBuZ1wiXSxcclxuXHRbXCIuL2Rpc3QvaW1nL2tuaWZlNTA1MC9uYXZhamEucG5nXCJdLFxyXG5dO1xyXG5jb25zdCBpdGVtc0FudWJpc05hbWUgPSBbW1wiS2FyYW1iaXQgfCBEb3BwbGVyXCJdLCBbXCJOYXZhamEgfCBTYWZhcmkgTWVzaFwiXV07XHJcbmNvbnN0IGdvbGQgPSBcImxpbmVhci1ncmFkaWVudCgxODBkZWcsIGJsYWNrIDQwJSwgcmdiYSgyNTUsMjQ4LDAsIC41KSAxMDAlXCI7XHJcbmNvbnN0IHJlZCA9IFwibGluZWFyLWdyYWRpZW50KDE4MGRlZywgYmxhY2sgNDAlLCByZ2JhKDIyMiwgNzYsIDY1LCAuNSkgMTAwJSlcIjtcclxuY29uc3QgcGluayA9IFwibGluZWFyLWdyYWRpZW50KDE4MGRlZywgYmxhY2sgNDAlLCByZ2JhKDI1NSwgNTAsIDI0MCwgLjUpIDEwMCUpXCI7XHJcbmNvbnN0IHB1cnBsZSA9XHJcblx0XCJsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCBibGFjayA0MCUsIHJnYmEoMTI1LCA1MCwgMjU1LCAuNSkgMTAwJSlcIjtcclxuY29uc3QgbGlnaHRCbHVlID1cclxuXHRcImxpbmVhci1ncmFkaWVudCgxODBkZWcsIGJsYWNrIDQwJSwgcmdiYSgxNjAsIDIxMSwgMjU1LCAuNSkgMTAwJSlcIjtcclxuY29uc3QgYmx1ZSA9IFwibGluZWFyLWdyYWRpZW50KDE4MGRlZywgYmxhY2sgNDAlLCByZ2JhKDUwLCAxMTMsIDI1NSwgLjUpIDEwMCUpXCI7XHJcbmNvbnN0IGdyZXkgPSBcImxpbmVhci1ncmFkaWVudCgxODBkZWcsIGJsYWNrIDQwJSwgcmdiYSg3OCwgNzgsIDc4LCAuNSkgMTAwJSlcIjtcclxubGV0IG9wZW5lZCA9IGZhbHNlO1xyXG5sZXQgY3VycmVudFdpbm5pbmdJdGVtUHJpY2U7XHJcbmNvbnN0IGJhbGFuY2VBbW91bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbGlzdC1pdGVtLWJhbGFuY2UtYW1vdW50XCIpO1xyXG5cclxuYmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiQmFsYW5jZVwiKTtcclxuXHJcbmNvbnN0IGFkZEJhbGFuY2UgPSAoKSA9PiB7XHJcblx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSArIGN1cnJlbnRXaW5uaW5nSXRlbVByaWNlO1xyXG5cclxuXHRiYWxhbmNlQW1vdW50LnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxuXHRiYWxhbmNlQW1vdW50TW9iaWxlLnRleHRDb250ZW50ID0gdmFsdWUudG9GaXhlZCgyKTtcclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZUJhbGFuY2VPbk9wZW4gPSAoKSA9PiB7XHJcblx0bGV0IGFtb3VudFZhbHVlID0gcGFyc2VGbG9hdChiYWxhbmNlQW1vdW50LnRleHRDb250ZW50KTtcclxuXHRsZXQgdmFsdWUgPSBhbW91bnRWYWx1ZSAtIDgwMDtcclxuXHJcblx0YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCA9IHZhbHVlLnRvRml4ZWQoMik7XHJcblx0YmFsYW5jZUFtb3VudE1vYmlsZS50ZXh0Q29udGVudCA9IHZhbHVlLnRvRml4ZWQoMik7XHJcbn07XHJcblxyXG5jb25zdCBzdGFydE9wZW5pbmdBbmltYXRpb24gPSAoKSA9PiB7XHJcblx0Y2FzZUJveC5jbGFzc0xpc3QuYWRkKFwib3Blbi1hbmltXCIpO1xyXG5cdGFkZEl0ZW1zKCk7XHJcblx0b3BlbmVkID0gdHJ1ZTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRvcGVuZWQgPSBmYWxzZTtcclxuXHRcdHJlc2V0T3BlbmluZygpO1xyXG5cdH0sIDY1MDApO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0V2lubmluZ0l0ZW0gPSAoKSA9PiB7XHJcblx0Y29uc3Qgd2lubmluZ0l0ZW1OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG5cdGNvbnN0IHdpbm5pbmdJdGVtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRjb25zdCB3aW5uaW5nSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuXHRjb25zdCB3aW5uaW5nSXRlbUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcblx0Y29uc3Qgd2lubmluZ0l0ZW1UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblx0bGV0IGNoYW5jZXMgPSB3aW5uaW5nSXRlbU51bWJlcjtcclxuXHJcblx0aWYgKGNoYW5jZXMgPD0gNTApIHtcclxuXHRcdGNoYW5jZXMgPSAwO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjaGFuY2VzID0gMTtcclxuXHR9XHJcblxyXG5cdGlmICh3aW5uaW5nSXRlbU51bWJlciA8PSA1MCkge1xyXG5cdFx0d2lubmluZ0l0ZW0uc3R5bGUuYmFja2dyb3VuZCA9IGdvbGQ7XHJcblx0fSBlbHNlIHtcclxuXHRcdHdpbm5pbmdJdGVtLnN0eWxlLmJhY2tncm91bmQgPSBncmV5O1xyXG5cdH1cclxuXHJcblx0Y29uc3QgcmFuZG9tSXRlbUZyb21Db2xvciA9IE1hdGguZmxvb3IoXHJcblx0XHRNYXRoLnJhbmRvbSgpICogaXRlbXNBbnViaXNJbWdbY2hhbmNlc10ubGVuZ3RoXHJcblx0KTtcclxuXHJcblx0d2lubmluZ0l0ZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYXNlLWl0ZW1cIik7XHJcblx0d2lubmluZ0l0ZW1JbWcuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYXNlLWl0ZW0taW1nXCIpO1xyXG5cdHdpbm5pbmdJdGVtSW1nLnNldEF0dHJpYnV0ZShcclxuXHRcdFwic3JjXCIsXHJcblx0XHRpdGVtc0FudWJpc0ltZ1tjaGFuY2VzXVtyYW5kb21JdGVtRnJvbUNvbG9yXVxyXG5cdCk7XHJcblx0d2lubmluZ0l0ZW1JbWcuc2V0QXR0cmlidXRlKFxyXG5cdFx0XCJhbHRcIixcclxuXHRcdGl0ZW1zQW51YmlzTmFtZVtjaGFuY2VzXVtyYW5kb21JdGVtRnJvbUNvbG9yXVxyXG5cdCk7XHJcblx0d2lubmluZ0l0ZW1UZXh0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FzZS1pdGVtLW5hbWVcIik7XHJcblx0d2lubmluZ0l0ZW1UZXh0LnRleHRDb250ZW50ID0gaXRlbXNBbnViaXNOYW1lW2NoYW5jZXNdW3JhbmRvbUl0ZW1Gcm9tQ29sb3JdO1xyXG5cclxuXHR3aW5uaW5nSXRlbS5hcHBlbmQod2lubmluZ0l0ZW1JbWcsIHdpbm5pbmdJdGVtVGV4dCk7XHJcblx0d2lubmluZ0l0ZW1EaXYuYXBwZW5kKHdpbm5pbmdJdGVtKTtcclxuXHRjYXNlQm94LmFwcGVuZCh3aW5uaW5nSXRlbURpdik7XHJcblxyXG5cdGN1cnJlbnRXaW5uaW5nSXRlbVByaWNlID0gaXRlbXNBbnViaXNQcmljZVtjaGFuY2VzXVtyYW5kb21JdGVtRnJvbUNvbG9yXTtcclxuXHJcblx0cmVtb3ZlQmFsYW5jZU9uT3BlbigpO1xyXG5cclxuXHRvcGVuQnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblx0c3Bpbm5pbmdCdG4uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRhZGRCYWxhbmNlKCk7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkJhbGFuY2VcIiwgYCR7YmFsYW5jZUFtb3VudC50ZXh0Q29udGVudH1gKTtcclxuXHJcblx0XHRpZCsrXHJcblx0XHRjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdGNvbnN0IGl0ZW1JbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG5cdFx0Y29uc3QgaXRlbVByaWNlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdGNvbnN0IGl0ZW1QcmljZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cdFx0Y29uc3QgaXRlbVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuXHRcdGNvbnN0IGl0ZW1QcmljZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG5cdFx0aXRlbS5zZXRBdHRyaWJ1dGUoXHJcblx0XHRcdFwiY2xhc3NcIixcclxuXHRcdFx0XCJtYWluX19kcm9wc2JveC1pdGVtIG1haW5fX2Ryb3BzYm94LWl0ZW0tLWdvbGRcIlxyXG5cdFx0KTtcclxuXHRcdGl0ZW0uc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG5cdFx0aXRlbUltZy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1haW5fX2Ryb3BzYm94LWl0ZW0taW1nXCIpO1xyXG5cdFx0aXRlbUltZy5zZXRBdHRyaWJ1dGUoXHJcblx0XHRcdFwic3JjXCIsXHJcblx0XHRcdGAke2l0ZW1zQW51YmlzSW1nW2NoYW5jZXNdW3JhbmRvbUl0ZW1Gcm9tQ29sb3JdfWBcclxuXHRcdCk7XHJcblx0XHRpdGVtSW1nLnNldEF0dHJpYnV0ZShcclxuXHRcdFx0XCJhbHRcIixcclxuXHRcdFx0YCR7aXRlbXNBbnViaXNJbWdbY2hhbmNlc11bcmFuZG9tSXRlbUZyb21Db2xvcl19YFxyXG5cdFx0KTtcclxuXHRcdGl0ZW1UZXh0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbl9fZHJvcHNib3gtaXRlbS1uYW1lXCIpO1xyXG5cdFx0aXRlbVByaWNlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbl9fZHJvcHNib3gtaXRlbS1wcmljZVwiKTtcclxuXHRcdGl0ZW1QcmljZUljb24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtYWluX19kcm9wc2JveC1pdGVtLXByaWNlYm94LWltZ1wiKTtcclxuXHRcdGl0ZW1QcmljZUljb24uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9kaXN0L2ltZy9vdGhlci9jb2luLnBuZ1wiKTtcclxuXHRcdGl0ZW1QcmljZUljb24uc2V0QXR0cmlidXRlKFwiYWx0XCIsIFwiQ29pbiBJY29uXCIpO1xyXG5cdFx0aXRlbVByaWNlQm94LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbl9fZHJvcHNib3gtaXRlbS1wcmljZWJveCBoaWRkZW5cIik7XHJcblx0XHRpdGVtUHJpY2UudGV4dENvbnRlbnQgPSBpdGVtc0FudWJpc1ByaWNlW2NoYW5jZXNdW3JhbmRvbUl0ZW1Gcm9tQ29sb3JdO1xyXG5cdFx0aXRlbS5zdHlsZS5vcmRlciA9IFwiLVwiICsgaWQ7XHJcblx0XHRpdGVtVGV4dC50ZXh0Q29udGVudCA9IGl0ZW1zQW51YmlzTmFtZVtjaGFuY2VzXVtyYW5kb21JdGVtRnJvbUNvbG9yXTtcclxuXHRcdGl0ZW1QcmljZUJveC5hcHBlbmQoaXRlbVByaWNlLCBpdGVtUHJpY2VJY29uKTtcclxuXHRcdGl0ZW0uYXBwZW5kKGl0ZW1JbWcsIGl0ZW1UZXh0LCBpdGVtUHJpY2VCb3gpO1xyXG5cdFx0bGFzdEl0ZW1Ecm9wcy5hcHBlbmQoaXRlbSk7XHJcblxyXG5cdFx0aWYgKGxhc3RJdGVtRHJvcHMuY2hpbGRFbGVtZW50Q291bnQgPiAxMCkge1xyXG5cdFx0XHRsYXN0SXRlbURyb3BzLmZpcnN0RWxlbWVudENoaWxkLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpZCAlIDIgPT09IDApIHtcclxuXHRcdFx0aXRlbS5zdHlsZS5iYWNrZ3JvdW5kID0gYGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzFkMjEyNiAyNSUsIHJnYmEoMjU1LCAyNTUsIDEsIDAuMSkgMTAwJWA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpdGVtLnN0eWxlLmJhY2tncm91bmQgPSBgbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMjgyZTM1IDI1JSwgcmdiYSgyNTUsIDI1NSwgMSwgMC4xKSAxMDAlYDtcclxuXHRcdH1cclxuXHJcblx0XHRpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xyXG5cdFx0XHRpdGVtUHJpY2VCb3guY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xyXG5cdFx0XHRpdGVtUHJpY2VCb3guY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHRcdH0pO1xyXG5cdH0sIDU1MDApO1xyXG5cclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdHdpbm5pbmdJdGVtRGl2LnJlbW92ZSgpO1xyXG5cdFx0b3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdFx0c3Bpbm5pbmdCdG4uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHR9LCA2NTAwKTtcclxufTtcclxuXHJcbmNvbnN0IGFkZEl0ZW1zID0gKCkgPT4ge1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDw9IDEwOyBpKyspIHtcclxuXHRcdGNvbnN0IG5vcm1hbEl0ZW1OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG5cdFx0Y29uc3Qgbm9ybWFsSXRlbURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRjb25zdCBub3JtYWxJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG5cdFx0Y29uc3Qgbm9ybWFsSXRlbUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcblx0XHRjb25zdCBub3JtYWxJdGVtVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cclxuXHRcdGxldCBjaGFuY2VzID0gbm9ybWFsSXRlbU51bWJlcjtcclxuXHJcblx0XHRpZiAoY2hhbmNlcyA8PSA1MCkge1xyXG5cdFx0XHRjaGFuY2VzID0gMDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNoYW5jZXMgPSAxO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHJhbmRvbUl0ZW1Gcm9tQ29sb3IgPSBNYXRoLmZsb29yKFxyXG5cdFx0XHRNYXRoLnJhbmRvbSgpICogaXRlbXNBbnViaXNJbWdbY2hhbmNlc10ubGVuZ3RoXHJcblx0XHQpO1xyXG5cclxuXHRcdGlmIChub3JtYWxJdGVtTnVtYmVyIDw9IDUwKSB7XHJcblx0XHRcdG5vcm1hbEl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9IGdvbGQ7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRub3JtYWxJdGVtLnN0eWxlLmJhY2tncm91bmQgPSBncmV5O1xyXG5cdFx0fVxyXG5cclxuXHRcdG5vcm1hbEl0ZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYXNlLWl0ZW1cIik7XHJcblx0XHRub3JtYWxJdGVtSW1nLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FzZS1pdGVtLWltZ1wiKTtcclxuXHRcdG5vcm1hbEl0ZW1JbWcuc2V0QXR0cmlidXRlKFxyXG5cdFx0XHRcInNyY1wiLFxyXG5cdFx0XHRpdGVtc0FudWJpc0ltZ1tjaGFuY2VzXVtyYW5kb21JdGVtRnJvbUNvbG9yXVxyXG5cdFx0KTtcclxuXHRcdG5vcm1hbEl0ZW1JbWcuc2V0QXR0cmlidXRlKFxyXG5cdFx0XHRcImFsdFwiLFxyXG5cdFx0XHRpdGVtc0FudWJpc05hbWVbY2hhbmNlc11bcmFuZG9tSXRlbUZyb21Db2xvcl1cclxuXHRcdCk7XHJcblx0XHRub3JtYWxJdGVtVGV4dC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhc2UtaXRlbS1uYW1lXCIpO1xyXG5cdFx0bm9ybWFsSXRlbVRleHQudGV4dENvbnRlbnQgPSBpdGVtc0FudWJpc05hbWVbY2hhbmNlc11bcmFuZG9tSXRlbUZyb21Db2xvcl07XHJcblxyXG5cdFx0bm9ybWFsSXRlbS5hcHBlbmQobm9ybWFsSXRlbUltZywgbm9ybWFsSXRlbVRleHQpO1xyXG5cdFx0bm9ybWFsSXRlbURpdi5hcHBlbmQobm9ybWFsSXRlbSk7XHJcblx0XHRjYXNlQm94LmFwcGVuZChub3JtYWxJdGVtRGl2KTtcclxuXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0bm9ybWFsSXRlbURpdi5yZW1vdmUoKTtcclxuXHRcdH0sIDY1MDApO1xyXG5cdH1cclxuXHJcblx0c2V0V2lubmluZ0l0ZW0oKTtcclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gNDsgaSsrKSB7XHJcblx0XHRjb25zdCBub3JtYWxJdGVtTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcclxuXHRcdGNvbnN0IG5vcm1hbEl0ZW1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0Y29uc3Qgbm9ybWFsSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuXHRcdGNvbnN0IG5vcm1hbEl0ZW1JbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG5cdFx0Y29uc3Qgbm9ybWFsSXRlbVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuXHJcblx0XHRsZXQgY2hhbmNlcyA9IG5vcm1hbEl0ZW1OdW1iZXI7XHJcblxyXG5cdFx0aWYgKGNoYW5jZXMgPD0gNTApIHtcclxuXHRcdFx0Y2hhbmNlcyA9IDA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjaGFuY2VzID0gMTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCByYW5kb21JdGVtRnJvbUNvbG9yID0gTWF0aC5mbG9vcihcclxuXHRcdFx0TWF0aC5yYW5kb20oKSAqIGl0ZW1zQW51YmlzSW1nW2NoYW5jZXNdLmxlbmd0aFxyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAobm9ybWFsSXRlbU51bWJlciA8PSA1MCkge1xyXG5cdFx0XHRub3JtYWxJdGVtLnN0eWxlLmJhY2tncm91bmQgPSBnb2xkO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bm9ybWFsSXRlbS5zdHlsZS5iYWNrZ3JvdW5kID0gZ3JleTtcclxuXHRcdH1cclxuXHJcblx0XHRub3JtYWxJdGVtLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FzZS1pdGVtXCIpO1xyXG5cdFx0bm9ybWFsSXRlbUltZy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhc2UtaXRlbS1pbWdcIik7XHJcblx0XHRub3JtYWxJdGVtSW1nLnNldEF0dHJpYnV0ZShcclxuXHRcdFx0XCJzcmNcIixcclxuXHRcdFx0aXRlbXNBbnViaXNJbWdbY2hhbmNlc11bcmFuZG9tSXRlbUZyb21Db2xvcl1cclxuXHRcdCk7XHJcblx0XHRub3JtYWxJdGVtSW1nLnNldEF0dHJpYnV0ZShcclxuXHRcdFx0XCJhbHRcIixcclxuXHRcdFx0aXRlbXNBbnViaXNOYW1lW2NoYW5jZXNdW3JhbmRvbUl0ZW1Gcm9tQ29sb3JdXHJcblx0XHQpO1xyXG5cdFx0bm9ybWFsSXRlbVRleHQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYXNlLWl0ZW0tbmFtZVwiKTtcclxuXHRcdG5vcm1hbEl0ZW1UZXh0LnRleHRDb250ZW50ID0gaXRlbXNBbnViaXNOYW1lW2NoYW5jZXNdW3JhbmRvbUl0ZW1Gcm9tQ29sb3JdO1xyXG5cclxuXHRcdG5vcm1hbEl0ZW0uYXBwZW5kKG5vcm1hbEl0ZW1JbWcsIG5vcm1hbEl0ZW1UZXh0KTtcclxuXHRcdG5vcm1hbEl0ZW1EaXYuYXBwZW5kKG5vcm1hbEl0ZW0pO1xyXG5cdFx0Y2FzZUJveC5hcHBlbmQobm9ybWFsSXRlbURpdik7XHJcblxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdG5vcm1hbEl0ZW1EaXYucmVtb3ZlKCk7XHJcblx0XHR9LCA2NTAwKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCByZXNldE9wZW5pbmcgPSAoKSA9PiB7XHJcblx0Y2FzZUJveC5jbGFzc0xpc3QucmVtb3ZlKFwib3Blbi1hbmltXCIpO1xyXG59O1xyXG5cclxub3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGlmIChvcGVuZWQgPT09IGZhbHNlICYmIHBhcnNlRmxvYXQoYmFsYW5jZUFtb3VudC50ZXh0Q29udGVudCkgPj0gODAwKSB7XHJcblx0XHRzdGFydE9wZW5pbmdBbmltYXRpb24oKTtcclxuXHRcdG9wZW5BdWRpby5wbGF5KCk7XHJcblx0fVxyXG59KTtcclxuIl19
